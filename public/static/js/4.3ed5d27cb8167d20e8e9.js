webpackJsonp([4],{206:function(t,e,n){function a(t){n(361)}var i=n(117)(n(304),n(393),a,null,null);t.exports=i.exports},291:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"contentWrap",data:function(){return{activeName:"user",loading:!0,CustomerStatusId:""}},props:["dataStatus"],mounted:function(){var t=this;this.$root.Bus.$on("listIsNull",function(){t.loading=!1}),t.routerChange()},methods:{handleClick:function(t,e){},removeLoading:function(){this.loading=!1},routerChange:function(){var t=this;t.$router.beforeEach(function(e,n,a){var i=t.CustomerStatusId;if(""!=i&&"user"==n.name&&n.path!=e.path){var r=n.params.mobile,o=e.params.mobile,s=n.params.company_id,l=e.params.company_id,c="draft_"+r+s;s==l&&r==o||!localStorage.getItem(c)?t.$ajax.post(t.$api.getModuleHost("CRM","/Customer/delCustomerStatus"),{id:i}).then(function(t){1e3==t.code&&a()}).catch(function(t){console.log(t)}):t.$confirm("有数据没有保存, 是否继续跳转?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.$root.Bus.$emit("tagDraft"),t.$ajax.post(t.$api.getModuleHost("CRM","/Customer/delCustomerStatus"),{id:i}).then(function(t){1e3==t.code&&a()}).catch(function(t){console.log(t)})}).catch(function(){a(!1)})}else a(),t.loading=!0})},setCustomerStatusId:function(t){this.CustomerStatusId=t}}}},294:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default={name:"UserList",data:function(){return{activeName:"all",filter:"全部客户",rank:"默认排序",selectChange:!1,clientParams:{current_page:"1",filter:"0",rank:"0",is_new:"0"},filters:[{value:"0",label:"全部客户"},{value:"1",label:"决策人"},{value:"2",label:"非决策人"},{value:"3",label:"未完善"}],ranks:[{value:"0",label:"默认排序"},{value:"1",label:"按成交金额排序"},{value:"2",label:"按最近成交排序"}],clientList:{},pagination:{}}},mounted:function(){var t=this;if(t.$route.query.from){var e=t.$route.query.from;if("boss"==e||"bossAdd"==e){var n=t.$route.query.mobile,a=t.$route.query.companyId;t.$route.query.type&&(t.clientParams.type=t.$route.query.type),t.$route.query.checkType&&(t.clientParams.checkType=t.$route.query.checkType),t.clientParams.from=e,t.clientParams.mobile=n,t.clientParams.company_id=a}}this.getClientList(),this.$root.Bus.$on("addSuc",function(e){var n=e[0],a=e[1];for(var i in t.clientList){var r=t.clientList[i].mobile,o=t.clientList[i].company_id;r==n&&o==a&&(t.clientList[i].is_created=1)}}),t.$root.Bus.$on("tagDraft",function(){var e=window.localStorage;for(var n in t.clientList){var a=t.clientList[n].company_id,i=t.clientList[n].mobile,r="draft_"+i+a;t.clientList[n].is_draft=!1,e[r]&&(t.clientList[n].is_draft=!0)}}),this.$bus.$off("flashUserList"),this.$bus.$on("flashUserList",t.getClientList)},methods:{setFilterParam:function(t){0==this.selectChange&&(this.clientParams.filter=t,this.getClientList(1),this.selectChange=!0)},setRankParam:function(t){0==this.selectChange&&(this.clientParams.rank=t,this.getClientList(1),this.selectChange=!0)},getClientList:function(t){var e=this;t&&1==t&&(e.clientParams.current_page=1),e.$ajax.get(e.$api.getModuleHost("CRM","/customer/getClientList"),e.clientParams).then(function(t){if(e.selectChange=!1,1e3==t.code){if(e.$parent.listData=!0,e.clientList=t.data,window.localStorage){var n=window.localStorage;for(var a in e.clientList){var i=e.clientList[a].company_id,r=e.clientList[a].mobile,o="draft_"+r+i;e.clientList[a].is_draft=!1,n[o]&&0==e.clientList[a].is_created?e.clientList[a].is_draft=!0:n.removeItem(o)}}e.pagination.current_page=t.current_page,e.pagination.total=t.total;var s=e.$route.params.mobile?e.$route.params.mobile:e.clientList[0].mobile,l=e.$route.params.company_id?e.$route.params.company_id:e.clientList[0].company_id,c=""!=!!e.$route.params.customer_id?e.$route.params.customer_id:e.clientList[0].customer_id;e.$router.push({path:"/foreground/index/"+(0==c?"user":"userview")+"/"+s+"/"+l+"/"+c})}else e.clientList={},e.$root.Bus.$emit("listIsNull"),e.$parent.listData=!1,e.pagination.current_page=1,e.pagination.total=0,console.log("currently has none clients' data")}).catch(function(t){console.error(t)})},changeTab:function(t,e){var n=t.name;this.initClientParams(),"all"==n?(this.activeName="all",this.clientParams.is_new=0,this.getClientList()):(this.activeName="new",this.clientParams.is_new=1,this.getClientList())},initClientParams:function(){this.filter="全部客户",this.rank="默认排序",this.clientParams.current_page="1",this.clientParams.filter="0",this.clientParams.rank="0"},handleSizeChange:function(t){},handleCurrentChange:function(t){this.clientParams.current_page=t,this.getClientList()}}}},304:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=n(368),i=n.n(a),r=n(367),o=n.n(r);e.default={name:"IndexPage",data:function(){return{from:!0,listData:!1}},mounted:function(){"boss"==this.$route.query.from&&(this.from=!1)},methods:{},components:{UserList:i.a,ContentWrap:o.a}}},320:function(t,e,n){e=t.exports=n(191)(!0),e.push([t.i,"#nav-menu{width:500px;min-width:500px;min-height:100vh;border-radius:0;overflow-y:auto;background:#fff;border:1px solid #d1dbe5;-webkit-box-sizing:border-box;box-sizing:border-box}#nav-menu .el-menu{background-color:#fff}#nav-menu .el-menu-item,#nav-menu .el-submenu .el-submenu__title{padding-top:10px;height:70px;line-height:20px}#nav-menu .el-menu-item:hover,#nav-menu .el-submenu .el-submenu__title:hover{background:#eff2f7}#nav-menu .info-btm{margin-top:10px}#nav-menu .client-check-btn{float:right;margin-top:10px}#nav-menu .filter-wrap{padding:12px 20px}#nav-menu .filter-wrap .grid-content h3{line-height:36px}#nav-menu .filter-wrap .grid-content .rank-list{margin-left:10px}.el-tabs--border-card>.el-tabs__content{padding:0}.el-tabs--border-card{-webkit-box-shadow:none;box-shadow:none;border:none}.el-menu-item.is-active{background:#e5e9f2;color:#20a0ff}.pagination{margin-top:20px}.client-list li{border-bottom:1px solid #d1dbe5}.client-list li a{font-size:12px;color:#333}.company-name{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.draft{color:#ff4949}.el-menu-item.is-active{background-color:transparent}.el-menu-item.hackActive{background:#e5e9f2}","",{version:3,sources:["D:/VUEPROJECT/boss_crm/src/components/index/UserList.vue"],names:[],mappings:"AACA,UACE,YAAa,AACb,gBAAiB,AACjB,iBAAkB,AAClB,gBAAiB,AACjB,gBAAiB,AACjB,gBAAiB,AACjB,yBAA0B,AAC1B,8BAA+B,AACvB,qBAAuB,CAChC,AACD,mBACE,qBAAuB,CACxB,AACD,iEAEE,iBAAkB,AAClB,YAAa,AACb,gBAAkB,CACnB,AACD,6EAEE,kBAAoB,CACrB,AACD,oBACE,eAAiB,CAClB,AACD,4BACE,YAAa,AACb,eAAiB,CAClB,AACD,uBACE,iBAAmB,CACpB,AACD,wCACE,gBAAkB,CACnB,AACD,gDACE,gBAAkB,CACnB,AACD,wCACE,SAAW,CACZ,AACD,sBACE,wBAAyB,AACjB,gBAAiB,AACzB,WAAa,CACd,AACD,wBACE,mBAAoB,AACpB,aAAe,CAChB,AACD,YACE,eAAiB,CAClB,AACD,gBACE,+BAAiC,CAClC,AACD,kBACE,eAAgB,AAChB,UAAY,CACb,AACD,cACE,uBAAwB,AACxB,mBAAoB,AACpB,eAAiB,CAClB,AACD,OACE,aAAe,CAChB,AAED,wBACE,4BAA8B,CAC/B,AACD,yBACE,kBAAoB,CACrB",file:"UserList.vue",sourcesContent:["\n#nav-menu {\n  width: 500px;\n  min-width: 500px;\n  min-height: 100vh;\n  border-radius: 0;\n  overflow-y: auto;\n  background: #fff;\n  border: 1px solid #d1dbe5;\n  -webkit-box-sizing: border-box;\n          box-sizing: border-box;\n}\n#nav-menu .el-menu {\n  background-color: #fff;\n}\n#nav-menu .el-menu-item,\n#nav-menu .el-submenu .el-submenu__title {\n  padding-top: 10px;\n  height: 70px;\n  line-height: 20px;\n}\n#nav-menu .el-menu-item:hover,\n#nav-menu .el-submenu .el-submenu__title:hover {\n  background: #EFF2F7;\n}\n#nav-menu .info-btm {\n  margin-top: 10px;\n}\n#nav-menu .client-check-btn {\n  float: right;\n  margin-top: 10px;\n}\n#nav-menu .filter-wrap {\n  padding: 12px 20px;\n}\n#nav-menu .filter-wrap .grid-content h3 {\n  line-height: 36px;\n}\n#nav-menu .filter-wrap .grid-content .rank-list {\n  margin-left: 10px;\n}\n.el-tabs--border-card > .el-tabs__content {\n  padding: 0;\n}\n.el-tabs--border-card {\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border: none;\n}\n.el-menu-item.is-active {\n  background: #E5E9F2;\n  color: #20A0FF;\n}\n.pagination {\n  margin-top: 20px;\n}\n.client-list li {\n  border-bottom: 1px solid #d1dbe5;\n}\n.client-list li a {\n  font-size: 12px;\n  color: #333;\n}\n.company-name {\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n}\n.draft {\n  color: #ff4949;\n}\n/*userListActiveHack*/\n.el-menu-item.is-active {\n  background-color: transparent;\n}\n.el-menu-item.hackActive {\n  background: #E5E9F2;\n}\n"],sourceRoot:""}])},321:function(t,e,n){e=t.exports=n(191)(!0),e.push([t.i,"#container{min-height:100vh;-webkit-box-flex:1;-ms-flex:1 auto;flex:1 auto;position:relative}.el-message{top:50%;margin-top:-20}.el-button,.el-checkbox__label,.el-form-item__content,.el-form-item__label,.el-input,.el-radio__label,.el-textarea__inner{font-size:12px}.el-loading-spinner{top:200px}.el-form-item__error{padding-top:0}","",{version:3,sources:["D:/VUEPROJECT/boss_crm/src/components/index/ContentWrap.vue"],names:[],mappings:"AACA,WACE,iBAAkB,AAClB,mBAAoB,AAChB,gBAAiB,AACb,YAAa,AACrB,iBAAmB,CACpB,AACD,YACE,QAAS,AACT,cAAgB,CACjB,AACD,0HAOE,cAAgB,CACjB,AACD,oBACE,SAAW,CACZ,AACD,qBACE,aAAe,CAChB",file:"ContentWrap.vue",sourcesContent:["\n#container {\n  min-height: 100vh;\n  -webkit-box-flex: 1;\n      -ms-flex: 1 auto;\n          flex: 1 auto;\n  position: relative;\n}\n.el-message {\n  top: 50%;\n  margin-top: -20;\n}\n.el-form-item__label,\n.el-radio__label,\n.el-checkbox__label,\n.el-input,\n.el-textarea__inner,\n.el-form-item__content,\n.el-button {\n  font-size: 12px;\n}\n.el-loading-spinner {\n  top: 200px;\n}\n.el-form-item__error {\n  padding-top: 0;\n}\n"],sourceRoot:""}])},335:function(t,e,n){e=t.exports=n(191)(!0),e.push([t.i,".container{display:-webkit-box;display:-ms-flexbox;display:flex;min-width:1280px}.pointer{cursor:pointer}.el-form-item{margin-bottom:14px}","",{version:3,sources:["D:/VUEPROJECT/boss_crm/src/views/index.page.vue"],names:[],mappings:"AACA,WACE,oBAAqB,AACrB,oBAAqB,AACrB,aAAc,AACd,gBAAkB,CACnB,AACD,SACE,cAAgB,CACjB,AACD,cACE,kBAAoB,CACrB",file:"index.page.vue",sourcesContent:["\n.container {\n  display: -webkit-box;\n  display: -ms-flexbox;\n  display: flex;\n  min-width: 1280px;\n}\n.pointer {\n  cursor: pointer;\n}\n.el-form-item {\n  margin-bottom: 14px;\n}\n"],sourceRoot:""}])},346:function(t,e,n){var a=n(320);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(192)("8494055a",a,!0)},347:function(t,e,n){var a=n(321);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(192)("25bdc45c",a,!0)},361:function(t,e,n){var a=n(335);"string"==typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);n(192)("ebd2c05c",a,!0)},367:function(t,e,n){function a(t){n(347)}var i=n(117)(n(291),n(379),a,null,null);t.exports=i.exports},368:function(t,e,n){function a(t){n(346)}var i=n(117)(n(294),n(378),a,null,null);t.exports=i.exports},378:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"nav-menu"}},[n("el-tabs",{attrs:{type:"border-card"},on:{"tab-click":t.changeTab},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"全部",name:"all"}},[n("el-row",{staticClass:"filter-wrap"},[n("el-col",{attrs:{span:7}},[n("div",{staticClass:"grid-content"},[n("h3",[t._v("共"+t._s(t.pagination.total)+"个客户")])])]),t._v(" "),n("el-col",{attrs:{span:7}},[n("div",{staticClass:"grid-content"},[n("el-select",{key:"all-filter",on:{change:t.setFilterParam},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},t._l(t.filters,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content"},[n("el-select",{key:"all-rank",staticClass:"rank-list",on:{change:t.setRankParam},model:{value:t.rank,callback:function(e){t.rank=e},expression:"rank"}},t._l(t.ranks,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])],1),t._v(" "),n("el-menu",{staticClass:"client-list",attrs:{"default-active":""}},t._l(t.clientList,function(e,a){return n("el-menu-item",{class:{hackActive:t.$route.path=="/foreground/index/"+(0==e.is_created?"user":"userview")+"/"+e.mobile+"/"+e.company_id+"/"+e.customer_id},attrs:{index:""+a}},[n("router-link",{attrs:{to:"/foreground/index/"+(0==e.is_created?"user":"userview")+"/"+e.mobile+"/"+e.company_id+"/"+e.customer_id}},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"clearfix"},[n("el-col",{attrs:{span:5}},[n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.decision_user))])],1),t._v(" "),n("el-col",{attrs:{span:5}},[t._v("\n                      "+t._s(e.customer_name)+"\n                    ")]),t._v(" "),n("el-col",{staticClass:"company-name",attrs:{span:13}},[n("span",[t._v("\n                        "+t._s(e.company_name)+" \n                      ")])]),t._v(" "),e.is_draft?n("el-col",{staticClass:"draft",attrs:{span:1}},[t._v("\n                        [草稿]\n                    ")]):t._e()],1),t._v(" "),n("div",{staticClass:"clearfix info-btm"},[n("el-col",{attrs:{span:12}},[t._v("\n                      总成交金额："+t._s(e.deal_amount)+"元\n                    ")]),t._v(" "),n("el-col",{attrs:{span:12}},[t._v("\n                      最近成交时间："+t._s(e.deal_time)+"\n                    ")])],1)]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-button",{staticClass:"client-check-btn",attrs:{size:"small",type:"primary"}},[t._v(t._s(0==e.is_created?"创建客户":"查看信息"))])],1)],1)],1)})),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.pagination.current_page,"page-size":20,layout:"total, prev, pager, next",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pagination.current_page=e}}})],1),t._v(" "),n("el-tab-pane",{attrs:{label:"新成交客户",name:"new"}},[n("el-row",{staticClass:"filter-wrap"},[n("el-col",{attrs:{span:7}},[n("div",{staticClass:"grid-content"},[n("h3",[t._v("共"+t._s(t.pagination.total)+"个客户")])])]),t._v(" "),n("el-col",{attrs:{span:7}},[n("div",{staticClass:"grid-content"},[n("el-select",{key:"new-filter",on:{change:t.setFilterParam},model:{value:t.filter,callback:function(e){t.filter=e},expression:"filter"}},t._l(t.filters,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)]),t._v(" "),n("el-col",{attrs:{span:10}},[n("div",{staticClass:"grid-content"},[n("el-select",{key:"new-rank",staticClass:"rank-list",on:{change:t.setRankParam},model:{value:t.rank,callback:function(e){t.rank=e},expression:"rank"}},t._l(t.ranks,function(t){return n("el-option",{key:t.value,attrs:{label:t.label,value:t.value}})}))],1)])],1),t._v(" "),n("el-menu",{staticClass:"client-list",attrs:{"default-active":"0"}},t._l(t.clientList,function(e,a){return n("el-menu-item",{class:{hackActive:t.$route.path=="/foreground/index/"+(0==e.is_created?"user":"userview")+"/"+e.mobile+"/"+e.company_id+"/"+e.customer_id},attrs:{index:""+a}},[n("router-link",{attrs:{to:"/foreground/index/"+(0==e.is_created?"user":"userview")+"/"+e.mobile+"/"+e.company_id+"/"+e.customer_id}},[n("el-col",{attrs:{span:18}},[n("div",{staticClass:"clearfix"},[n("el-col",{attrs:{span:5}},[n("el-tag",{attrs:{type:"danger"}},[t._v(t._s(e.decision_user))])],1),t._v(" "),n("el-col",{attrs:{span:5}},[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.customer_name)+"\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),n("el-col",{staticClass:"company-name",attrs:{span:13}},[n("span",[t._v("\n\t\t\t\t\t\t\t\t\t\t\t"+t._s(e.company_name)+" \n\t\t\t\t\t\t\t\t\t\t")])]),t._v(" "),e.is_draft?n("el-col",{staticClass:"draft",attrs:{span:1}},[t._v("\n\t\t\t\t\t\t\t\t\t\t\t[草稿]\n\t\t\t\t\t\t\t\t\t")]):t._e()],1),t._v(" "),n("div",{staticClass:"clearfix info-btm"},[n("el-col",{attrs:{span:12}},[t._v("\n\t\t\t\t\t\t\t\t\t\t总成交金额："+t._s(e.deal_amount)+"元\n\t\t\t\t\t\t\t\t\t")]),t._v(" "),n("el-col",{attrs:{span:12}},[t._v("\n\t\t\t\t\t\t\t\t\t\t最近成交时间："+t._s(e.deal_time)+"\n\t\t\t\t\t\t\t\t\t")])],1)]),t._v(" "),n("el-col",{attrs:{span:6}},[n("el-button",{staticClass:"client-check-btn",attrs:{size:"small",type:"primary"}},[t._v(t._s(0==e.is_created?"创建客户":"查看信息"))])],1)],1)],1)})),t._v(" "),n("el-pagination",{staticClass:"pagination",attrs:{"current-page":t.pagination.current_page,"page-size":20,layout:"total, prev, pager, next",total:t.pagination.total},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange,"update:currentPage":function(e){t.pagination.current_page=e}}})],1)],1)],1)},staticRenderFns:[]}},379:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"loading",rawName:"v-loading.body",value:t.loading,expression:"loading",modifiers:{body:!0}}],attrs:{id:"container","element-loading-text":"拼命加载中"}},[t.dataStatus?n("el-row",{attrs:{type:"flex",justify:"center"}},[n("el-col",{attrs:{span:23}},[n("el-tabs",{on:{"tab-click":t.handleClick},model:{value:t.activeName,callback:function(e){t.activeName=e},expression:"activeName"}},[n("el-tab-pane",{attrs:{label:"办会人信息",name:"user"}})],1),t._v(" "),n("router-view",{on:{setCustomerStatusId:t.setCustomerStatusId,querySuc:t.removeLoading}})],1)],1):t._e()],1)},staticRenderFns:[]}},393:function(t,e){t.exports={render:function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"container"},[n("user-list",{directives:[{name:"show",rawName:"v-show",value:t.from,expression:"from"}],ref:"userList"}),t._v(" "),n("content-wrap",{attrs:{dataStatus:t.listData}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=4.3ed5d27cb8167d20e8e9.js.map