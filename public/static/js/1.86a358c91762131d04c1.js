webpackJsonp([1],{220:function(e,t,a){function n(e){a(350)}var r=a(132)(a(282),a(380),n,null,null);e.exports=r.exports},234:function(e,t,a){"use strict";t.a={name:"ElRow",componentName:"ElRow",props:{tag:{type:String,default:"div"},gutter:Number,type:String,justify:{type:String,default:"start"},align:{type:String,default:"top"}},computed:{style:function(){var e={};return this.gutter&&(e.marginLeft="-"+this.gutter/2+"px",e.marginRight=e.marginLeft),e}},render:function(e){return e(this.tag,{class:["el-row","start"!==this.justify?"is-justify-"+this.justify:"","top"!==this.align?"is-align-"+this.align:"",{"el-row--flex":"flex"===this.type}],style:this.style},this.$slots.default)}}},235:function(e,t,a){e.exports={default:a(251),__esModule:!0}},236:function(e,t,a){function n(e){a(263)}var r=a(132)(a(249),a(276),n,null,null);e.exports=r.exports},237:function(e,t,a){function n(e){a(260)}var r=a(132)(a(248),a(271),n,"data-v-125f72b8",null);e.exports=r.exports},238:function(e,t,a){var n=a(132)(a(242),a(272),null,null,null);e.exports=n.exports},239:function(e,t,a){var n=a(132)(a(243),a(273),null,null,null);e.exports=n.exports},240:function(e,t,a){"use strict";var n=a(36),r=a.n(n),o=a(23),i=a.n(o);t.a={name:"ElCol",props:{span:{type:Number,default:24},tag:{type:String,default:"div"},offset:Number,pull:Number,push:Number,xs:[Number,Object],sm:[Number,Object],md:[Number,Object],lg:[Number,Object]},computed:{gutter:function(){for(var e=this.$parent;e&&"ElRow"!==e.$options.componentName;)e=e.$parent;return e?e.gutter:0}},render:function(e){var t=this,a=[],n={};return this.gutter&&(n.paddingLeft=this.gutter/2+"px",n.paddingRight=n.paddingLeft),["span","offset","pull","push"].forEach(function(e){t[e]&&a.push("span"!==e?"el-col-"+e+"-"+t[e]:"el-col-"+t[e])}),["xs","sm","md","lg"].forEach(function(e){if("number"==typeof t[e])a.push("el-col-"+e+"-"+t[e]);else if("object"===i()(t[e])){var n=t[e];r()(n).forEach(function(t){a.push("span"!==t?"el-col-"+e+"-"+t+"-"+n[t]:"el-col-"+e+"-"+n[t])})}}),e(this.tag,{class:["el-col",a],style:n},this.$slots.default)}}},241:function(e,t,a){"use strict";function n(e,t,a){this.$children.forEach(function(r){r.$options.componentName===e?r.$emit.apply(r,[t].concat(a)):n.apply(r,[e,t].concat([a]))})}t.a={methods:{dispatch:function(e,t,a){for(var n=this.$parent||this.$root,r=n.$options.componentName;n&&(!r||r!==e);)(n=n.$parent)&&(r=n.$options.componentName);n&&n.$emit.apply(n,[t].concat(a))},broadcast:function(e,t,a){n.call(this,e,t,a)}}}},242:function(e,t,a){"use strict";function n(){}function r(e,t){var a=e;t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");for(var n=t.split("."),r=0,o=n.length;r<o-1;++r){var i=n[r];if(!(i in a))throw new Error("please transfer a valid prop path to form item!");a=a[i]}return{o:a,k:n[r],v:a[n[r]]}}Object.defineProperty(t,"__esModule",{value:!0});var o=a(134),i=a(241);t.default={name:"ElFormItem",componentName:"ElFormItem",mixins:[i.a],props:{label:String,labelWidth:String,prop:String,required:Boolean,rules:[Object,Array],error:String,validateStatus:String,showMessage:{type:Boolean,default:!0}},watch:{error:function(e){this.validateMessage=e,this.validateState=e?"error":""},validateStatus:function(e){this.validateState=e}},computed:{labelStyle:function(){var e={};if("top"===this.form.labelPosition)return e;var t=this.labelWidth||this.form.labelWidth;return t&&(e.width=t),e},contentStyle:function(){var e={},t=this.label;if("top"===this.form.labelPosition||this.form.inline)return e;if(!t&&!this.labelWidth&&this.isNested)return e;var a=this.labelWidth||this.form.labelWidth;return a&&(e.marginLeft=a),e},form:function(){for(var e=this.$parent,t=e.$options.componentName;"ElForm"!==t;)"ElFormItem"===t&&(this.isNested=!0),e=e.$parent,t=e.$options.componentName;return e},fieldValue:{cache:!1,get:function(){var e=this.form.model;if(e&&this.prop){var t=this.prop;return-1!==t.indexOf(":")&&(t=t.replace(/:/,".")),r(e,t).v}}},isRequired:function(){var e=this.getRules(),t=!1;return e&&e.length&&e.every(function(e){return!e.required||(t=!0,!1)}),t}},data:function(){return{validateState:"",validateMessage:"",validateDisabled:!1,validator:{},isNested:!1}},methods:{validate:function(e){var t=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;this.validateDisabled=!1;var r=this.getFilteredRule(e);if(!(r&&0!==r.length||this._props.hasOwnProperty("required")))return a(),!0;this.validateState="validating";var i={};i[this.prop]=r;var s=new o.default(i),c={};c[this.prop]=this.fieldValue,s.validate(c,{firstFields:!0},function(e,n){t.validateState=e?"error":"success",t.validateMessage=e?e[0].message:"",a(t.validateMessage)})},resetField:function(){this.validateState="",this.validateMessage="";var e=this.form.model,t=this.fieldValue,a=this.prop;-1!==a.indexOf(":")&&(a=a.replace(/:/,"."));var n=r(e,a);Array.isArray(t)?(this.validateDisabled=!0,n.o[n.k]=[].concat(this.initialValue)):(this.validateDisabled=!0,n.o[n.k]=this.initialValue)},getRules:function(){var e=this.form.rules,t=this.rules,a=this._props.hasOwnProperty("required")?{required:!!this.required}:[];return e=e?e[this.prop]:[],[].concat(t||e||[]).concat(a)},getFilteredRule:function(e){return this.getRules().filter(function(t){return!t.trigger||-1!==t.trigger.indexOf(e)})},onFieldBlur:function(){this.validate("blur")},onFieldChange:function(){if(this.validateDisabled)return void(this.validateDisabled=!1);this.validate("change")}},mounted:function(){if(this.prop){this.dispatch("ElForm","el.form.addField",[this]);var e=this.fieldValue;Array.isArray(e)&&(e=[].concat(e)),Object.defineProperty(this,"initialValue",{value:e});(this.getRules().length||this._props.hasOwnProperty("required"))&&(this.$on("el.form.blur",this.onFieldBlur),this.$on("el.form.change",this.onFieldChange))}},beforeDestroy:function(){this.dispatch("ElForm","el.form.removeField",[this])}}},243:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={name:"ElForm",componentName:"ElForm",props:{model:Object,rules:Object,labelPosition:String,labelWidth:String,labelSuffix:{type:String,default:""},inline:Boolean,showMessage:{type:Boolean,default:!0}},watch:{rules:function(){this.validate()}},data:function(){return{fields:[]}},created:function(){var e=this;this.$on("el.form.addField",function(t){t&&e.fields.push(t)}),this.$on("el.form.removeField",function(t){t.prop&&e.fields.splice(e.fields.indexOf(t),1)})},methods:{resetFields:function(){this.model&&this.fields.forEach(function(e){e.resetField()})},validate:function(e){var t=this;if(!this.model)return void console.warn("[Element Warn][Form]model is required for validate to work!");var a=!0,n=0;0===this.fields.length&&e&&e(!0),this.fields.forEach(function(r,o){r.validate("",function(r){r&&(a=!1),"function"==typeof e&&++n===t.fields.length&&e(a)})})},validateField:function(e,t){var a=this.fields.filter(function(t){return t.prop===e})[0];if(!a)throw new Error("must call validateField with valid prop string!");a.validate("",t)}}}},244:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(133),r=a.n(n),o=a(237),i=a.n(o),s=a(236),c=a.n(s),l=a(234),f=a(240);t.default={props:["status","customer_id","company_id","mobile","changeFieldLen1","baseData"],data:function(){var e=function(e,t,a){if(""!=t)return/^1[34578]\d{9}$/.test(t)?void 0:a(new Error("手机号码格式不正确"))},t=function(e,t,a){/^[1-9][0-9]$|^[1-9]$/.test(t)||""==t||a(new Error("年龄范围为1-99"))},a=function(e,t,a){console.log("sss"),/^0\d{2,3}-?\d{7,8}$/.test(t)||""==t||a(new Error("电话号码格式不对"))};return{isInSave:!1,city_data:{city_code:"",single:"single"},orgUserBasicInfo:{city_name:""},userbasicRule:[{name:"age",rule:/^[1-9][0-9]$|^[1-9]$/,desc:"年龄范围为1-99"},{name:"mobile",rule:/^1[345678]\d{9}$/,desc:"手机码号1格式不正确"},{name:"mobile1",rule:/^1[345678]\d{9}$/,desc:"手机码号2格式不正确"},{name:"recommand_mobile",rule:/^1[345678]\d{9}$/,desc:"推荐人手机码号1格式不正确"},{name:"recommand_mobile1",rule:/^1[345678]\d{9}$/,desc:"推荐人手机码号2格式不正确"},{name:"recommand_phone",rule:/^0\d{2,3}-?\d{7,8}$/,desc:"推荐人固定电话号码格式不正确"},{name:"phone",rule:/^0\d{2,3}-?\d{7,8}$/,desc:"固定电话号码不对"}],reqRule:[{name:"prev_year_budget",rule:/^[1-9]([0-9]{0,3}|[0-0]{4})$/,desc:"会议总预算必须为正整数且不能大于10000万"},{name:"current_year_num",rule:/^[0-9]+$/,desc:"会议总次数必须为正整数"},{name:"hxe_percentage",rule:/^\d{0,2}$/,desc:"通过小二预定占比必须为小于100的正整数"}],sex_arr:[{id:1,name:"男"},{id:2,name:"女"}],specialty_arr:[{id:1,name:"专业"},{id:2,name:"非专业"}],show_being_lived_city:!1,showProfessionUserDef:!1,showJobUserDef:!1,tagData:{profession:{tag:"profession",tagName:"自定义职业标签"},job:{tag:"job",tagName:"自定义职位标签"}},mobileExp:/^1[34578]\d{9}$/,userbasicinfo:{},recommandInfo:{isEmpty:!0,data:{}},baseInfoRules:{mobile:[{required:!0,message:"请输入手机号",trigger:"blur"},{validator:e,trigger:"blur"}],mobile1:[{validator:e,trigger:"blur"}],recommand_mobile:[{validator:e,trigger:"blur"}],recommand_mobile1:[{validator:e,trigger:"blur"}],recommand_phone:[{validator:a,trigger:"blur"}],age:[{validator:t,trigger:"blur"}],phone:[{validator:a,trigger:"blur"}]}}},mounted:function(){var e=this;e.getOrgUserBasicInfo(),e.$root.Bus.$off("baseFormValidate"),e.$root.Bus.$on("baseFormValidate",e.baseFormValidate)},watch:{$route:function(e,t){var a=this;a.resetData(),a.getOrgUserBasicInfo()}},methods:{resetData:function(){this.show_being_lived_city=!1,this.showProfessionUserDef=!1,this.city_data={city_code:"",single:"single"},this.orgUserBasicInfo={city_name:""},this.orgUserBasicInfo={city_name:""},this.userbasicinfo={},this.recommandInfo={isEmpty:!0,data:{}}},getRecommandInfo:function(e){var t=this;t.recommandInfo.isEmpty=!0,t.userbasicinfo.recommand_id="0",t.userbasicinfo.recommand_company_id="",t.mobileExp.test(e)&&t.$ajax.post(t.$api.getModuleHost("CRM","customer/checkUser"),{mobile:e}).then(function(e){if(1e3==e.code){if(0==e.customer_id)return;t.recommandInfo.isEmpty=!1,t.recommandInfo.data=e.data,t.userbasicinfo.recommand_id=e.customer_id,t.userbasicinfo.recommand_company_id=e.company_id}}).catch(function(e){console.log(e)})},showAddArea:function(e){var t=this;t["show"+e+"UserDef"]=!t["show"+e+"UserDef"]},setUserDefined:function(e){var t=this;console.log(e),t.$emit("getUserDefined",e)},setCity:function(e){var t=this;t.orgUserBasicInfo.city_name=e.city_name,t.show_being_lived_city=!1,t.changeField("city",e.city_code)},hideCityList:function(){this.show_being_lived_city=!1},changeField:function(e,t){var a=this;1==a.status?a.$emit("getUserBasicInfo",arguments):a.userbasicinfo[e]=t},getOrgUserBasicInfo:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","customer/userBasicInfo"),{company_id:e.company_id,customer_id:e.customer_id,mobile:e.mobile}).then(function(t){if(1e3==t.code){var a="draft_"+e.mobile+e.company_id;if(localStorage.getItem(a)){var n=JSON.parse(localStorage.getItem(a));e.$emit("getUserBasicInfoAll",n.userbasicinfo),e.orgUserBasicInfo=n.userbasicinfo}else e.$emit("getUserBasicInfoAll",t.data),e.orgUserBasicInfo=t.data,0!=e.orgUserBasicInfo.recommand_mobile&&"0"!=e.orgUserBasicInfo.recommand_mobile||(e.orgUserBasicInfo.recommand_mobile="");e.userbasicinfo=t.data,e.getRecommandInfo(e.orgUserBasicInfo.recommand_mobile),e.$refs.orgUserBasicInfo.resetFields()}}).catch(function(e){console.error(e)})},showBeingLivedCity:function(){this.show_being_lived_city=!0},save:function(){var e=this;if(0==e.changeFieldLen1)return void e.$emit("getBool");var t=e.validateForm();if(""!=t)return void e.$message({message:t,type:"warning",duration:1e3});e.isInSave||(e.isInSave=!0,e.$ajax.post(e.$api.getModuleHost("CRM","customer/saveCustomer"),{customer_id:e.customer_id,company_id:e.company_id,userbasicinfo:r()(e.userbasicinfo)}).then(function(t){1e3==t.code?e.$emit("getBool"):alert(t.msg),e.isInSave=!1}).catch(function(t){console.error(t),e.isInSave=!1}))},validateForm:function(){var e="",t=this;for(var a in t.userbasicRule){var n=t.userbasicRule[a].name;if(t.userbasicinfo[n]){if(!t.userbasicRule[a].rule.test(t.userbasicinfo[n]))return e=t.userbasicRule[a].desc}}return e},baseFormValidate:function(){this.$refs.orgUserBasicInfo.validate()}},components:{ElCol:f.a,ElRow:l.a,cityList:i.a,tagAdder:c.a}}},245:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(133),r=a.n(n),o=a(235),i=a.n(o),s=a(237),c=a.n(s);t.default={props:["status","mobile","customer_id","company_id","baseData","reqRule","consumptionRule","city"],data:function(){var e=this;return{isInSave:!1,isFouce:!1,orgreqinfo:{prev_year_budget:"",next_conf_info:0,allopatry_conf:"",current_year_num:"",hxe_percentage:"",allopatry_conf_info:[{id:0,num:"",price:""},{id:0,num:"",price:""}],often_conf_type:[],often_conf_city:[],occasionally_conf_city:[],participant_type:[],consumption_interval:[],reason:""},selected_often_conf_city:[],often_conf_city_sel:[],selected_occasionally_conf_city:[],occasionally_conf_city_sel:[],city_data:{single:"multiple",multiple_type:"",often_conf_city:[],occasionally_conf_city:[],city_self:e.city},diffpalce_arr:[{id:1,name:"有"},{id:2,name:"无"}],trend_arr:[{id:1,name:"增长"},{id:2,name:"持平"},{id:3,name:"减少"}],consumption_interval:{},self_consumption_interval:[],often_city_list_show:!1,occasionally_city_list_show:!1,city_self:e.city,next_conf_info:0,next_conf_info_times:0,allopatry_conf_times:0,showAllopatryConfInfo:!1,reqinfo:{},editOneRulers:{reason:[{required:!0,message:"请输入原因",trigger:"blur"}]}}},mounted:function(){var e=this;2==e.status?e.getOrgReqInfo():e.setLocalData(),e.$root.Bus.$off("formOneValidate"),e.$root.Bus.$on("formOneValidate",e.formOneValidate)},watch:{$route:function(e,t){var a=this;a.resetData(),2==a.status?a.getOrgReqInfo():a.setLocalData()}},methods:{resetData:function(){this.next_conf_info_times=0,this.allopatry_conf_times=0,this.selected_often_conf_city=[],this.often_conf_city_sel=[],this.selected_occasionally_conf_city=[],this.occasionally_conf_city_sel=[],this.consumption_interval={},this.reqinfo={},this.self_consumption_interval=[],this.often_city_list_show=!1,this.occasionally_city_list_show=!1,this.showAllopatryConfInfo=!1,this.next_conf_info=0,this.next_conf_info_times=0,this.allopatry_conf_times=0,this.orgreqinfo={prev_year_budget:"",next_conf_info:0,allopatry_conf:"",current_year_num:"",hxe_percentage:"",allopatry_conf_info:[{id:0,num:"",price:""},{id:0,num:"",price:""}],often_conf_type:[],often_conf_city:[],occasionally_conf_city:[],participant_type:[],consumption_interval:[],reason:""}},setLocalData:function(){var e=this,t="draft_"+e.mobile+e.company_id;if(localStorage.getItem(t)){var a=JSON.parse(localStorage.getItem(t));if(a=a.reqinfo)for(var n in a)if("often_conf_type"==n||"often_conf_city"==n||"occasionally_conf_city"==n||"participant_type"==n)e.orgreqinfo[n]=a[n].split(","),e.orgreqinfo[n].forEach(function(e,t,a){return a[t]=Number(e)});else if("consumption_interval"==n){e.self_consumption_interval=a[n];for(var r in e.self_consumption_interval)e.consumption_interval["times_"+e.self_consumption_interval[r].id]=Number(e.self_consumption_interval[r].num)}else e.orgreqinfo[n]=a[n];e.$refs.form2.resetFields()}},getOrgReqInfo:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","customer/reqInfo"),{company_id:e.company_id,customer_id:e.customer_id}).then(function(t){if(1e3==t.code){if(e.orgreqinfo.prev_year_budget=t.data.prev_year_budget,e.orgreqinfo.next_conf_info=""==t.data.next_conf_info?e.orgreqinfo.next_conf_info:t.data.next_conf_info,e.next_conf_info=""==t.data.next_conf_info?e.next_conf_info:t.data.next_conf_info,e.reason=t.data.reason,e.orgreqinfo.allopatry_conf=t.data.allopatry_conf,1==t.data.allopatry_conf&&(e.showAllopatryConfInfo=!0),e.orgreqinfo.current_year_num=t.data.current_year_num,e.orgreqinfo.hxe_percentage=t.data.hxe_percentage,e.orgreqinfo.reason=t.data.reason,""!=t.data.participant_type?(e.orgreqinfo.participant_type=t.data.participant_type.split(","),e.orgreqinfo.participant_type.forEach(function(e,t,a){return a[t]=Number(e)})):e.orgreqinfo.participant_type=[],""!=t.data.often_conf_type?e.orgreqinfo.often_conf_type=t.data.often_conf_type.split(","):e.orgreqinfo.often_conf_type=[],""!=t.data.often_conf_city?(e.orgreqinfo.often_conf_city=t.data.often_conf_city.split(","),e.orgreqinfo.often_conf_city.forEach(function(e,t,a){return a[t]=Number(e)})):e.orgreqinfo.often_conf_city=[],""!=t.data.occasionally_conf_city?(e.orgreqinfo.occasionally_conf_city=t.data.occasionally_conf_city.split(","),e.orgreqinfo.occasionally_conf_city.forEach(function(e,t,a){return a[t]=Number(e)})):e.orgreqinfo.occasionally_conf_city=[],t.data.allopatry_conf_info[0])for(var a in t.data.allopatry_conf_info[0])e.orgreqinfo.allopatry_conf_info[0][a]=t.data.allopatry_conf_info[0][a];else e.orgreqinfo.allopatry_conf_info[0].id=0,e.orgreqinfo.allopatry_conf_info[0].num="",e.orgreqinfo.allopatry_conf_info[0].price="";if(t.data.allopatry_conf_info[1])for(var a in t.data.allopatry_conf_info[1])e.orgreqinfo.allopatry_conf_info[1][a]=t.data.allopatry_conf_info[1][a];else e.orgreqinfo.allopatry_conf_info[1].id=0,e.orgreqinfo.allopatry_conf_info[1].num="",e.orgreqinfo.allopatry_conf_info[1].price="";e.orgreqinfo.consumption_interval=t.data.consumption_interval,e.self_consumption_interval=t.data.consumption_interval;var n=!0,r=!1,o=void 0;try{for(var s,c=i()(e.orgreqinfo.consumption_interval);!(n=(s=c.next()).done);n=!0){var l=s.value;e.consumption_interval["times_"+l.id]=Number(l.num)}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}e.disabledCity()}}).catch(function(e){console.error(e)})},resetReason:function(){var e=this;e.next_conf_info_times++,e.reqinfo.reason=e.orgreqinfo.reason,e.changeField("next_conf_info",e.orgreqinfo.next_conf_info),e.next_conf_info_times>1&&(e.orgreqinfo.reason="")},resetAllopatryConfInfo:function(){var e=this;++e.allopatry_conf_times>=1&&(2==e.orgreqinfo.allopatry_conf?(e.showAllopatryConfInfo=!1,e.orgreqinfo.allopatry_conf_info=[{id:0,num:"",price:""},{id:0,num:"",price:""}],e.setAllopatryConfInfo(),e.orgreqinfo.often_conf_city=[],e.orgreqinfo.occasionally_conf_city=[],e.setArrToString("often_conf_city"),e.setArrToString("occasionally_conf_city"),e.disabledCity()):e.showAllopatryConfInfo=!0,e.changeField("allopatry_conf",e.orgreqinfo.allopatry_conf))},changeField:function(e,t){var a=this;1==a.status?a.$emit("getReqInfo",arguments):a.reqinfo[e]=t},setConsumptionInterval:function(e,t){var a=this,n=!1,r=!0,o=!1,s=void 0;try{for(var c,l=i()(a.self_consumption_interval);!(r=(c=l.next()).done);r=!0){var f=c.value;n||f.id!==e||(f.num=t,n=!0)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}if(!n){var u={id:e,num:t};a.self_consumption_interval.push(u)}arguments[0]="consumption_interval",arguments[1]=a.self_consumption_interval,1==a.status?a.$emit("getReqInfo",arguments):a.reqinfo[arguments[0]]=arguments[1]},setAllopatryConfInfo:function(){var e=this;console.log(1),arguments[0]="allopatry_conf_info",arguments[1]=e.orgreqinfo.allopatry_conf_info,1==e.status?e.$emit("getReqInfo",arguments):e.reqinfo[arguments[0]]=arguments[1]},setArrToString:function(e){var t=this;arguments[0]=e,arguments[1]=t.orgreqinfo[e].join(","),1==t.status?t.$emit("getReqInfo",arguments):t.reqinfo[arguments[0]]=arguments[1]},save:function(){var e=this,t=e.validateForm();if(""!=t)return void e.$message({message:t,type:"warning",duration:1e3});2==e.orgreqinfo.allopatry_conf&&(e.reqinfo.allopatry_conf_info=[]),e.isInSave||(e.isInSave=!0,e.$ajax.post(e.$api.getModuleHost("CRM","customer/saveCustomer"),{customer_id:e.customer_id,company_id:e.company_id,reqinfo:r()(e.reqinfo)}).then(function(t){1e3==t.code?e.$emit("getBool"):alert(t.msg),e.isInSave=!1}).catch(function(t){console.error(t),e.isInSave=!1}))},validateForm:function(){var e="",t=this;for(var a in t.reqRule){var n=t.reqRule[a].name;if(t.reqinfo[n])if("next_conf_info"==n){if(!t.$refs.budgetReason.value)return e=t.baseData.year+1+"年会议总预算的原因不能为空"}else{var r=t.reqRule[a].rule;if(!r.test(t.reqinfo[n]))return e=t.reqRule[a].desc}}if(t.reqinfo.consumption_interval)for(var o in t.reqinfo.consumption_interval){var i=t.reqinfo.consumption_interval[o].num,s=t.reqinfo.consumption_interval[o].id;if(i&&!/^[0-9]+$/.test(i))return e=t.consumptionRule["cons_"+s]}if(t.reqinfo.allopatry_conf_info)for(var c in t.reqinfo.allopatry_conf_info){var i=t.reqinfo.allopatry_conf_info[c].num,l=t.reqinfo.allopatry_conf_info[c].price;if(l&&!/^[0-9]+$/.test(l))return e="常跨地区举办的两种会议金额必须正整数";if(i&&!/^[0-9]+$/.test(i))return e="常跨地区举办的两种会议次数必须正整数"}return e},showOftenCityList:function(e){var t=this;t.often_city_list_show=e,t.occasionally_city_list_show&&(t.occasionally_city_list_show=!1),t.often_city_list_show&&t.disabledCity("OftenCityListSel")},showOccasionallyCityList:function(e){var t=this;t.occasionally_city_list_show=e,t.often_city_list_show&&(t.often_city_list_show=!1),t.occasionally_city_list_show&&t.disabledCity("OccasionallyCityListSel")},setCityAll:function(e){var t=this,a={city_code:e.id,city_name:e.name},n=!1;t.orgreqinfo[e.type]=e.data;var r=!0,o=!1,s=void 0;try{for(var c,l=i()(t.city_self);!(r=(c=l.next()).done);r=!0){c.value.id==a.city_code&&(n=!0)}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}n||t.city_self.push({id:a.city_code,name:a.city_name}),"often_conf_city"==e.type?(t.setArrToString("often_conf_city"),t.disabledCity("OftenCityListSel")):(t.setArrToString("occasionally_conf_city"),t.disabledCity("OccasionallyCityListSel"))},disabledCity:function(e,t){var a=this;t&&(a.city_self=t);var n=!0,r=!1,o=void 0;try{for(var s,c=i()(a.city_self);!(n=(s=c.next()).done);n=!0){var l=s.value;if(l.disabledOften=!1,l.disabledOccasionally=!1,a.orgreqinfo.often_conf_city.length>0){var f=!0,u=!1,d=void 0;try{for(var p,_=i()(a.orgreqinfo.often_conf_city);!(f=(p=_.next()).done);f=!0){p.value==l.id&&(l.disabledOccasionally=!0)}}catch(e){u=!0,d=e}finally{try{!f&&_.return&&_.return()}finally{if(u)throw d}}}if(a.orgreqinfo.occasionally_conf_city.length>0){var m=!0,g=!1,y=void 0;try{for(var v,h=i()(a.orgreqinfo.occasionally_conf_city);!(m=(v=h.next()).done);m=!0){v.value==l.id&&(l.disabledOften=!0)}}catch(e){g=!0,y=e}finally{try{!m&&h.return&&h.return()}finally{if(g)throw y}}}}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}e&&(a.city_data.often_conf_city=a.orgreqinfo.often_conf_city,a.city_data.occasionally_conf_city=a.orgreqinfo.occasionally_conf_city,a.city_data.city_self=a.city_self,"OftenCityListSel"==e?(a.city_data.multiple_type="often_conf_city",a.often_city_list_show&&a.$refs[e].setCityList(a.city_data),a.occasionally_city_list_show&&(a.occasionally_city_list_show=!1)):(a.city_data.multiple_type="occasionally_conf_city",a.occasionally_city_list_show&&a.$refs[e].setCityList(a.city_data),a.often_city_list_show&&(a.often_city_list_show=!1)))},formOneValidate:function(){this.$refs.form2.validate()}},components:{cityList:c.a}}},246:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(133),r=a.n(n),o=a(235),i=a.n(o),s=a(236),c=a.n(s),l=a(238),f=a.n(l),u=a(239),d=a.n(u),p=a(234);t.default={props:["status","customer_id","company_id","mobile","baseData","area"],data:function(){return{isInSave:!1,orguserfeature:{decision:0,decision_reason:0,build_require:"",trait:"",site_type:[],preference:[],build_require_type:[],customer_tag:[],often_conf_area:[],participant:[{id:"",comment:""}],percentage:{percentage:"",num:"",price:""}},userfeatureRule:[{name:"percentage",rule:/^(0|([1-9][0-9]?)|(100))(\.\d{0,2})?$/,desc:"房餐会的比例必须为小于等于100的数"},{name:"conf_percentage",rule:/^(0|([1-9][0-9]?)|(100))(\.\d{0,2})?$/,desc:"纯会的比例必须为小于100的正整数"},{name:"num",rule:/^[1-9][0-9]*$/,desc:"房餐会次数必须为整数且大于0"},{name:"price",rule:/^[1-9]([0-9]{0,3}|[0-0]{4})$/,desc:"房餐会平均每场金额必须为正整数且不能大于10000万"},{name:"participant"},{name:"often_conf_area"},{name:"decision"}],self_build_require:"",self_build_require_type:[],self_participant_id:"",self_participant_comment:"",conf_percentage:"",percentageZero:!0,often_conf_area:this.area,decisionSpeed_arr:[{id:1,name:"快"},{id:2,name:"中"},{id:3,name:"慢"}],establishReq_arr:[{id:1,name:"较多"},{id:2,name:"偶尔"},{id:3,name:"没有"}],showBuildReqUserDef:!1,showPersonalTagUserDef:!1,tagData:{has_other_req:{tag:"has_other_req",tagName:"其余会务需求"},personal_tag:{tag:"personal_tag",tagName:"自定义客户个性标签"}},userfeature:{},editTwoRules:{"participant[0].comment":[{required:!0,message:"请输入原因",trigger:"blur"}],decision_reason:[{validator:function(e,t,a){console.log(t),0==t&&a(new Error("请选择原因"))}}]}}},created:function(){var e=this;2==e.status?e.getOrgUserFeature():e.setLocalData(),e.$root.Bus.$off("formTwoValidate"),e.$root.Bus.$on("formTwoValidate",e.formTwoValidate)},watch:{$route:function(e,t){var a=this;a.resetData(),2==a.status?a.getOrgUserFeature():a.setLocalData()}},methods:{resetData:function(){var e=this;e.orguserfeature={decision:0,decision_reason:0,build_require:"",trait:"",site_type:[],preference:[],build_require_type:[],customer_tag:[],often_conf_area:[],participant:[{id:0,comment:""}],percentage:{percentage:"",num:"",price:""}},e.self_build_require="",e.self_build_require_type=[],e.self_participant_id="",e.self_participant_comment="",e.conf_percentage="",e.percentageZero=!1,e.showBuildReqUserDef=!1,e.showPersonalTagUserDef=!1,e.userfeature={}},setLocalData:function(){var e=this,t="draft_"+e.mobile+e.company_id;if(localStorage.getItem(t)){var a=JSON.parse(localStorage.getItem(t));a=a.userfeature;for(var n in a)e.orguserfeature[n]="site_type"==n||"preference"==n||"build_require_type"==n||"customer_tag"==n||"often_conf_area"==n?a[n].split(","):a[n]}},showAddArea:function(e){var t=this;t["show"+e+"UserDef"]=!t["show"+e+"UserDef"]},setUserDefined:function(e){this.$emit("getUserDefined",e)},getOrgUserFeature:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","customer/userFeature"),{company_id:e.company_id,customer_id:e.customer_id}).then(function(t){if(1e3==t.code){e.orguserfeature.decision=t.data.decision,e.orguserfeature.decision_reason=t.data.decision_reason,e.orguserfeature.build_require=t.data.build_require,e.self_build_require=t.data.build_require,e.orguserfeature.trait=t.data.trait,""!=t.data.site_type?e.orguserfeature.site_type=t.data.site_type.split(","):e.orguserfeature.site_type=[],""!=t.data.preference?e.orguserfeature.preference=t.data.preference.split(","):e.orguserfeature.preference=[],""!=t.data.build_require_type?(e.orguserfeature.build_require_type=t.data.build_require_type.split(","),e.self_build_require_type=t.data.build_require_type.split(",")):e.orguserfeature.build_require_type=[],""!=t.data.customer_tag?e.orguserfeature.customer_tag=t.data.customer_tag.split(","):e.orguserfeature.customer_tag=[],""!=t.data.percentage?(e.orguserfeature.percentage=t.data.percentage,e.conf_percentage=100-parseFloat(e.orguserfeature.percentage.percentage),e.conf_percentage=e.conf_percentage):(e.conf_percentage="",e.orguserfeature.percentage={percentage:"",num:"",price:""}),t.data.participant.length?(e.orguserfeature.participant=t.data.participant,e.self_participant_id=t.data.participant[0].id,e.self_participant_comment=t.data.participant[0].comment):e.orguserfeature.participant=[{id:"",comment:""}],e.orguserfeature.often_conf_area=t.data.often_conf_area;var a=!0,n=!1,r=void 0;try{for(var o,s=i()(e.often_conf_area);!(a=(o=s.next()).done);a=!0){var c=o.value;c.selected=!1,c.comment="";var l=!0,f=!1,u=void 0;try{for(var d,p=i()(e.orguserfeature.often_conf_area);!(l=(d=p.next()).done);l=!0){var _=d.value;_.id===c.id&&(c.selected=!0,c.comment=_.comment)}}catch(e){f=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw u}}}}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}}}).catch(function(e){console.error(e)})},changeField:function(e,t){var a=this;1==a.status?a.$emit("getUserFeature",arguments):a.userfeature[e]=t},resetBuildRequireType:function(){var e=this;e.orguserfeature.build_require_type=[],e.orguserfeature.build_require==e.self_build_require&&(e.orguserfeature.build_require_type=e.self_build_require_type,e.self_build_require="",e.self_build_require_type=[]),e.changeField("build_require",e.orguserfeature.build_require),e.setArrToString("build_require_type")},resetFiledDecisionReason:function(){var e=this;if(e.$refs.form3.validate(),0==e.orguserfeature.decision&&(e.orguserfeature.decision_reason=0),1==e.orguserfeature.decision){var t=!1,a=!0,n=!1,r=void 0;try{for(var o,s=i()(e.baseData.decision_reason_fast);!(a=(o=s.next()).done);a=!0){o.value.id==e.orguserfeature.decision_reason&&(t=!0)}}catch(e){n=!0,r=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw r}}e.orguserfeature.decision_reason=t?e.orguserfeature.decision_reason:0}if(2==e.orguserfeature.decision&&(e.orguserfeature.decision_reason=0),3==e.orguserfeature.decision){var c=!1,l=!0,f=!1,u=void 0;try{for(var d,p=i()(e.baseData.decision_reason_slow);!(l=(d=p.next()).done);l=!0){d.value.id==e.orguserfeature.decision_reason&&(c=!0)}}catch(e){f=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw u}}e.orguserfeature.decision_reason=c?e.orguserfeature.decision_reason:0}e.changeField("decision",e.orguserfeature.decision)},setArrToString:function(e){var t=this;arguments[0]=e,arguments[1]=t.orguserfeature[e].join(","),1==t.status?t.$emit("getUserFeature",arguments):t.userfeature[arguments[0]]=arguments[1]},setOftenConfArea:function(e){var t=this,a=[],n=!0,r=!1,o=void 0;try{for(var s,c=i()(t.often_conf_area);!(n=(s=c.next()).done);n=!0){var l=s.value,f={id:0,comment:""};l.selected?(f.id=l.id,f.comment=l.comment,a.push(f)):l.comment=""}}catch(e){r=!0,o=e}finally{try{!n&&c.return&&c.return()}finally{if(r)throw o}}arguments[0]="often_conf_area",arguments[1]=a,1==t.status?t.$emit("getUserFeature",arguments):t.userfeature[arguments[0]]=arguments[1]},setParticipantComment:function(){var e=this;e.orguserfeature.participant[0].comment="",e.orguserfeature.participant[0].id==e.self_participant_id&&(e.orguserfeature.participant[0].comment=e.self_participant_comment,e.self_participant_id="",e.self_participant_comment=""),e.setParticipant()},setParticipant:function(){var e=this;arguments[0]="participant",arguments[1]=e.orguserfeature.participant,1==e.status?e.$emit("getUserFeature",arguments):e.userfeature[arguments[0]]=arguments[1]},setPercentageNum:function(){var e=this;0==e.orguserfeature.percentage.percentage&&(e.percentageZero=!0,e.conf_percentage=100-e.orguserfeature.percentage.percentage,e.orguserfeature.percentage.num="",e.orguserfeature.percentage.price=""),""==e.orguserfeature.percentage.percentage&&(e.percentageZero=!0,e.conf_percentage="",e.orguserfeature.percentage.num="",e.orguserfeature.percentage.price=""),e.setPercentageField("percentage")},setPercentageField:function(e){var t=this;t.orguserfeature.percentage[e]=t.orguserfeature.percentage[e],t.orguserfeature.percentage.percentage>0&&t.orguserfeature.percentage.percentage<=100&&""!=t.orguserfeature.percentage.percentage&&(t.percentageZero=!1,t.conf_percentage=100-t.orguserfeature.percentage.percentage,t.conf_percentage=t.conf_percentage.toFixed(2)),arguments[0]="percentage",arguments[1]=t.orguserfeature.percentage,1==t.status?t.$emit("getUserFeature",arguments):t.userfeature[arguments[0]]=arguments[1]},setFormData:function(e){var t=this;1==t.status?t.$emit("getUserFeature",arguments):t.userfeature[arguments[0]]=arguments[1]},save:function(){var e=this,t=e.validateForm();if(""!=t)return void e.$message({message:t,type:"warning",duration:1e3});2==e.userfeature.decision&&(e.userfeature.decision_reason=0),e.isInSave||(e.isInSave=!0,e.$ajax.post(e.$api.getModuleHost("CRM","customer/saveCustomer"),{customer_id:e.customer_id,company_id:e.company_id,userfeature:r()(e.userfeature)}).then(function(t){1e3==t.code?e.$emit("getBool"):alert(t.msg),e.isInSave=!1}).catch(function(t){console.error(t),e.isInSave=!1}))},validateForm:function(){var e="",t=this;for(var a in t.userfeatureRule){var n=t.userfeatureRule[a].name;if("participant"==n||"often_conf_area"==n||"decision"==n){if("often_conf_area"==n)for(var r in t.often_conf_area)if(t.often_conf_area[r].selected&&!t.often_conf_area[r].comment)return e=t.often_conf_area[r].name+"的原因不能为空";if("decision"==n&&t.userfeature[n]&&!t.userfeature.decision_reason&&2!=t.userfeature[n])return e="决策原因不能为空";if("participant"==n&&t.userfeature[n]&&""==t.userfeature[n][0].comment&&""!=t.userfeature[n][0].id)return e="客户价格敏感度的原因不能为空"}else if("num"==n||"price"==n){var o=t.userfeatureRule[a].rule;if(t.userfeature.percentage&&""!=t.userfeature.percentage[n]&&!o.test(t.userfeature.percentage[n]))return e=t.userfeatureRule[a].desc}else if(t.userfeature[n]){var i=t.userfeatureRule[a].rule;if(""!=t.userfeature.percentage[n]&&!i.test(t.userfeature.percentage[n]))return e=t.userfeatureRule[a].desc}}return e},formTwoValidate:function(){this.$refs.form3.validate()}},computed:{hideBuildRequireType:function(){var e=this;return""==e.orguserfeature.build_require||3===e.orguserfeature.build_require}},components:{ElRow:p.a,ElForm:d.a,ElFormItem:f.a,tagAdder:c.a}}},247:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(133),r=a.n(n),o=a(236),i=a.n(o);t.default={props:["status","customer_id","company_id","mobile","baseData"],data:function(){return{isInSave:!1,editThreeRulers:{"decision_user.phone":[{validator:function(e,t,a){var n=/^0\d{2,3}-?\d{7,8}$/;/^1[34578]\d{9}$/.test(t)||n.test(t)||""==t||a(new Error("联系方式必须为手机或固定电话"))},trigger:"blur"}]},orgcompanyfeature:{conf_department:[],decision_comment:"",decision_type:0,decision_user:{name:"",department_id:0,job_id:0,phone:""},is_decisionmaker:""},showDecisionUser:!1,is_decisionmaker_arr:[{id:1,name:"是"},{id:2,name:"否"}],showConfDepartmentUserDef:!1,tagData:{department:{tag:"department",tagName:"自定义公司常办会部门"}},companyfeature:{}}},mounted:function(){var e=this;2==e.status?e.getOrgCompanyFeature():e.setLocalData(),e.$root.Bus.$off("formThreeValidate"),e.$root.Bus.$on("formThreeValidate",e.formThreeValidate)},watch:{$route:function(e,t){var a=this;a.resetData(),2==a.status?a.getOrgCompanyFeature():a.setLocalData()}},methods:{resetData:function(){var e=this;e.orgcompanyfeature={conf_department:[],decision_comment:"",decision_type:0,decision_user:{name:"",department_id:0,job_id:0,phone:""},is_decisionmaker:""},e.showDecisionUser=!1,e.showConfDepartmentUserDef=!1,e.companyfeature={}},setLocalData:function(){var e=this,t="draft_"+e.mobile+e.company_id;if(localStorage.getItem(t)){var a=JSON.parse(localStorage.getItem(t));a=a.companyfeature;for(var n in a)e.orgcompanyfeature[n]="conf_department"==n?a[n].split(","):a[n];e.$refs.form4.resetFields()}},showAddArea:function(e){var t=this;t["show"+e+"UserDef"]=!t["show"+e+"UserDef"]},setUserDefined:function(e){this.$emit("getUserDefined",e)},getOrgCompanyFeature:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","customer/userCompanyFeature"),{customer_id:e.customer_id,company_id:e.company_id}).then(function(t){1e3==t.code&&(e.orgcompanyfeature.decision_comment=t.data.decision_comment,e.orgcompanyfeature.decision_type=t.data.decision_type,e.orgcompanyfeature.is_decisionmaker=t.data.is_decisionmaker,""!=t.data.conf_department?e.orgcompanyfeature.conf_department=t.data.conf_department.split(","):e.orgcompanyfeature.conf_department=[],""!=t.data.decision_user?e.orgcompanyfeature.decision_user=t.data.decision_user:e.orgcompanyfeature.decision_user={name:"",department_id:0,job_id:0,phone:""})}).catch(function(e){console.error(e)})},changeField:function(e,t){var a=this;1==a.status?a.$emit("getCompanyFeature",arguments):a.companyfeature[e]=t},resetDecisionUser:function(){var e=this;1==e.orgcompanyfeature.is_decisionmaker?e.showDecisionUser=!1:e.showDecisionUser=!0,e.changeField("is_decisionmaker",e.orgcompanyfeature.is_decisionmaker)},setArrToString:function(e){var t=this;arguments[0]=e,arguments[1]=t.orgcompanyfeature[e].join(","),1==t.status?t.$emit("getCompanyFeature",arguments):t.companyfeature[arguments[0]]=arguments[1]},setDecisionUser:function(){var e=this;arguments[0]="decision_user",arguments[1]=e.orgcompanyfeature.decision_user,1==e.status?e.$emit("getCompanyFeature",arguments):e.companyfeature[arguments[0]]=arguments[1]},save:function(){var e=this,t=/^0\d{2,3}-?\d{7,8}$/;if(!/^1[34578]\d{9}$/.test(e.orgcompanyfeature.decision_user.phone)&&!t.test(e.orgcompanyfeature.decision_user.phone)&&""!=e.orgcompanyfeature.decision_user.phone)return e.$message({message:"决策人联系方式必须为手机或固定电话",type:"warning",duration:1e3}),!1;e.isInSave||(e.isInSave=!0,e.$ajax.post(e.$api.getModuleHost("CRM","customer/saveCustomer"),{customer_id:e.customer_id,company_id:e.company_id,companyfeature:r()(e.companyfeature)}).then(function(t){1e3==t.code?e.$emit("getBool"):alert(t.msg),e.isInSave=!1}).catch(function(t){console.error(t),e.isInSave=!1}))},formThreeValidate:function(){this.$refs.form4.validate()}},components:{tagAdder:i.a}}},248:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(235),r=a.n(n);t.default={props:["city_data"],data:function(){var e=this;return{cityList:{},type:0,letterArr:["ABCD","EFGH","JKLM","NPQR","STWX","YZ"],city_code:e.city_data.city_code,city_name:e.city_name,hasCityList:0,single:e.city_data.single,multiple_type:e.city_data.multiple_type,city_self:e.city_data.city_self,often_conf_city_sel:e.city_data.often_conf_city,occasionally_conf_city_sel:e.city_data.occasionally_conf_city}},created:function(){var e=this;console.log(e.hasCityList),0==e.hasCityList&&e.getCityList()},methods:{getCityList:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","customer/getAllCity")).then(function(t){1e3==t.code&&(e.cityList=t.data,e.hasCityList=1,"multiple"==e.single&&e.setCityListDis())}).catch(function(e){console.error(e)})},setCityList:function(e){var t=this;if(t.single="multiple",t.multiple_type=e.multiple_type,t.city_self=e.city_self,t.often_conf_city_sel=e.often_conf_city,t.occasionally_conf_city_sel=e.occasionally_conf_city,t.often_conf_city_sel.length||t.occasionally_conf_city_sel.length){var a=!0,n=!1,o=void 0;try{for(var i,s=r()(t.letterArr);!(a=(i=s.next()).done);a=!0){var c=i.value,l=!0,f=!1,u=void 0;try{for(var d,p=r()(c.split(""));!(l=(d=p.next()).done);l=!0){var _=d.value,m=!0,g=!1,y=void 0;try{for(var v,h=r()(t.cityList[_]);!(m=(v=h.next()).done);m=!0){var b=v.value,A=!0,C=!1,x=void 0;try{for(var w,B=r()(t.city_self);!(A=(w=B.next()).done);A=!0){var D=w.value;b.id==D.id&&D.disabledOften&&(b.disabledOften=!0,b.disabledOccasionally=!1),b.id==D.id&&D.disabledOccasionally&&(b.disabledOften=!1,b.disabledOccasionally=!0)}}catch(e){C=!0,x=e}finally{try{!A&&B.return&&B.return()}finally{if(C)throw x}}}}catch(e){g=!0,y=e}finally{try{!m&&h.return&&h.return()}finally{if(g)throw y}}}}catch(e){f=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw u}}}}catch(e){n=!0,o=e}finally{try{!a&&s.return&&s.return()}finally{if(n)throw o}}}},setCityListDis:function(){var e=this,t=!0,a=!1,n=void 0;try{for(var o,i=r()(e.letterArr);!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,l=!1,f=void 0;try{for(var u,d=r()(s.split(""));!(c=(u=d.next()).done);c=!0){var p=u.value,_=!0,m=!1,g=void 0;try{for(var y,v=r()(e.cityList[p]);!(_=(y=v.next()).done);_=!0){var h=y.value;h.disabledOften=!1,h.disabledOccasionally=!1}}catch(e){m=!0,g=e}finally{try{!_&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}},changeType:function(e){this.type=e},getCityName:function(){var e=this,t=!0,a=!1,n=void 0;try{for(var o,i=r()(e.letterArr);!(t=(o=i.next()).done);t=!0){var s=o.value,c=!0,l=!1,f=void 0;try{for(var u,d=r()(s.split(""));!(c=(u=d.next()).done);c=!0){var p=u.value,_=!0,m=!1,g=void 0;try{for(var y,v=r()(e.cityList[p]);!(_=(y=v.next()).done);_=!0){var h=y.value;h.id==e.city_code&&(e.city_name=h.name)}}catch(e){m=!0,g=e}finally{try{!_&&v.return&&v.return()}finally{if(m)throw g}}}}catch(e){l=!0,f=e}finally{try{!c&&d.return&&d.return()}finally{if(l)throw f}}}}catch(e){a=!0,n=e}finally{try{!t&&i.return&&i.return()}finally{if(a)throw n}}e.$emit("getCity",{city_code:e.city_code,city_name:e.city_name})},sendCityName:function(e,t){var a=this,n=!1,o=!0,i=!1,s=void 0;try{for(var c,l=r()(a[a.multiple_type+"_sel"]);!(o=(c=l.next()).done);o=!0){e==c.value&&(n=!0)}}catch(e){i=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(i)throw s}}n?a.setCityAll(e,t,a.multiple_type):a.setCityAll(e,"",a.multiple_type)},setCityAll:function(e,t,a){var n=this,r={data:n[a+"_sel"],id:e,name:t,type:a};n.$emit("getCityAll",r)},hide:function(){this.$emit("hide")}}}},249:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={props:["tagData"],data:function(){return{tagAdderData:this.tagData,showAddAreaObj:{type_profession_sending:!1,type_has_other_req_sending:!1,type_personal_tag_sending:!1,type_department_sending:!1},addTagData:{profession:{type:1,name:""},has_other_req:{type:3,name:""},personal_tag:{type:2,name:""},department:{type:4,name:""},job:{type:5,name:""}}}},created:function(){},methods:{submitTag:function(e,t){console.log(e+"----"+t);var a=this;a.showAddAreaObj["type_"+t+"_sending"]||""==a.addTagData[t].name||(a.showAddAreaObj["type_"+t+"_sending"]=!0,a.$ajax.post(a.$api.getModuleHost("CRM","customer/addTag"),{type:e,name:a.addTagData[t].name}).then(function(e){if(1e3==e.code){e.tag_id,e.name;a.addTagData[t].name="",a.showAddAreaObj["type_"+t+"_sending"]=!1,a.$emit("getUserDefined",{type_name:t,id:e.tag_id,name:e.name})}else alert(e.msg)}).catch(function(e){console.error(e)}))}}}},251:function(e,t,a){a(61),a(60),e.exports=a(252)},252:function(e,t,a){var n=a(8),r=a(135);e.exports=a(5).getIterator=function(e){var t=r(e);if("function"!=typeof t)throw TypeError(e+" is not iterable!");return n(t.call(e))}},253:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".hide[data-v-125f72b8]{display:none}.position-single[data-v-125f72b8]{position:absolute;right:0;top:30px}.position-multiple[data-v-125f72b8]{position:absolute;left:0;top:30px}.content[data-v-125f72b8]{font-size:13px;line-height:20px;z-index:9998;width:600px;text-align:left;color:#404040;border:1px solid #ccc;border-radius:2px;padding:10px;background:#fff;-webkit-box-shadow:0 5px 15px -5px rgba(0,0,0,.5);box-shadow:0 5px 15px -5px rgba(0,0,0,.5);font-family:Microsoft YaHei;-webkit-user-select:none;-moz-user-select:none}.pop_city_head[data-v-125f72b8]{padding-bottom:5px}.pop_city_head span[data-v-125f72b8]{width:60px;display:inline-block;cursor:pointer;text-align:center}.pop_city_head span[data-v-125f72b8]:first-child{text-align:left;margin-right:10px}.pop_city_head span.on[data-v-125f72b8]{color:#20a0ff;font-weight:700}.pop_city_body_content p strong[data-v-125f72b8]{display:block;font-weight:700}.pop_city_body_content p .item[data-v-125f72b8]{display:inline-block;width:90px;text-overflow:ellipsis;white-space:nowrap;overflow:hidden;cursor:pointer}.content .el-checkbox+.el-checkbox[data-v-125f72b8],.content .el-radio+.el-radio[data-v-125f72b8]{margin-left:0}.pop_city_body_content .el-checkbox[data-v-125f72b8],.pop_city_body_content .el-radio[data-v-125f72b8]{margin-right:10px}.close-icon[data-v-125f72b8]{cursor:pointer;position:absolute;right:10px;top:10px;font-size:20px;color:#20a0ff;font-weight:700}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/common/cityList.vue"],names:[],mappings:"AACA,uBACE,YAAc,CACf,AACD,kCACE,kBAAmB,AACnB,QAAS,AACT,QAAU,CACX,AACD,oCACE,kBAAmB,AACnB,OAAQ,AACR,QAAU,CACX,AACD,0BACE,eAAgB,AAChB,iBAAkB,AAClB,aAAc,AACd,YAAa,AACb,gBAAiB,AACjB,cAAe,AACf,sBAAuB,AACvB,kBAAmB,AACnB,aAAc,AACd,gBAAiB,AACjB,kDAAuD,AAC/C,0CAA+C,AACvD,4BAA+B,AAC/B,yBAA0B,AAC1B,qBAAuB,CACxB,AACD,gCACE,kBAAoB,CACrB,AACD,qCACE,WAAY,AACZ,qBAAsB,AACtB,eAAgB,AAChB,iBAAmB,CACpB,AACD,iDACE,gBAAiB,AACjB,iBAAmB,CACpB,AACD,wCACE,cAAe,AACf,eAAkB,CACnB,AACD,iDACE,cAAe,AACf,eAAkB,CACnB,AACD,gDACE,qBAAsB,AACtB,WAAY,AACZ,uBAAwB,AACxB,mBAAoB,AACpB,gBAAiB,AACjB,cAAgB,CACjB,AACD,kGAEE,aAAe,CAChB,AACD,uGAEE,iBAAmB,CACpB,AACD,6BACE,eAAgB,AAChB,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,eAAgB,AAChB,cAAe,AACf,eAAkB,CACnB",file:"cityList.vue",sourcesContent:['\n.hide[data-v-125f72b8] {\n  display: none;\n}\n.position-single[data-v-125f72b8] {\n  position: absolute;\n  right: 0;\n  top: 30px;\n}\n.position-multiple[data-v-125f72b8] {\n  position: absolute;\n  left: 0;\n  top: 30px;\n}\n.content[data-v-125f72b8] {\n  font-size: 13px;\n  line-height: 20px;\n  z-index: 9998;\n  width: 600px;\n  text-align: left;\n  color: #404040;\n  border: 1px solid #ccc;\n  border-radius: 2px;\n  padding: 10px;\n  background: #fff;\n  -webkit-box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 0.5);\n          box-shadow: 0 5px 15px -5px rgba(0, 0, 0, 0.5);\n  font-family: "Microsoft YaHei";\n  -webkit-user-select: none;\n  -moz-user-select: none;\n}\n.pop_city_head[data-v-125f72b8] {\n  padding-bottom: 5px;\n}\n.pop_city_head span[data-v-125f72b8] {\n  width: 60px;\n  display: inline-block;\n  cursor: pointer;\n  text-align: center;\n}\n.pop_city_head span[data-v-125f72b8]:first-child {\n  text-align: left;\n  margin-right: 10px;\n}\n.pop_city_head span.on[data-v-125f72b8] {\n  color: #20a0ff;\n  font-weight: bold;\n}\n.pop_city_body_content p strong[data-v-125f72b8] {\n  display: block;\n  font-weight: bold;\n}\n.pop_city_body_content p .item[data-v-125f72b8] {\n  display: inline-block;\n  width: 90px;\n  text-overflow: ellipsis;\n  white-space: nowrap;\n  overflow: hidden;\n  cursor: pointer;\n}\n.content .el-checkbox + .el-checkbox[data-v-125f72b8],\n.content .el-radio + .el-radio[data-v-125f72b8] {\n  margin-left: 0;\n}\n.pop_city_body_content .el-checkbox[data-v-125f72b8],\n.pop_city_body_content .el-radio[data-v-125f72b8] {\n  margin-right: 10px;\n}\n.close-icon[data-v-125f72b8] {\n  cursor: pointer;\n  position: absolute;\n  right: 10px;\n  top: 10px;\n  font-size: 20px;\n  color: #20a0ff;\n  font-weight: bold;\n}\n'],sourceRoot:""}])},254:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".margin-top8{margin-top:8px}.el-radio-group .sex-radio.el-radio{width:50px}.specialty-radio.el-radio{width:58px}.city-live{cursor:pointer}.text-link{text-decoration:underline;color:blue}.red-text{color:red}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/Info/baseInfoEdit.vue"],names:[],mappings:"AACA,aACE,cAAgB,CACjB,AACD,oCACE,UAAY,CACb,AACD,0BACE,UAAY,CACb,AACD,WACE,cAAgB,CACjB,AACD,WACE,0BAA2B,AAC3B,UAAY,CACb,AACD,UACE,SAAW,CACZ",file:"baseInfoEdit.vue",sourcesContent:["\n.margin-top8 {\n  margin-top: 8px;\n}\n.el-radio-group .sex-radio.el-radio {\n  width: 50px;\n}\n.specialty-radio.el-radio {\n  width: 58px;\n}\n.city-live {\n  cursor: pointer;\n}\n.text-link {\n  text-decoration: underline;\n  color: blue;\n}\n.red-text {\n  color: red;\n}\n"],sourceRoot:""}])},256:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".hide{display:none}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/common/tagAdder.vue"],names:[],mappings:"AACA,MACE,YAAc,CACf",file:"tagAdder.vue",sourcesContent:["\n.hide {\n  display: none;\n}\n"],sourceRoot:""}])},257:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,"","",{version:3,sources:[],names:[],mappings:"",file:"requirementEditPart3.vue",sourceRoot:""}])},258:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".el-rate{margin-top:8px}.reasonError{display:none;position:absolute;top:100%;margin-top:-10px}.errorShow{display:block}.relative{position:relative}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/Info/requirementEditPart2.vue"],names:[],mappings:"AACA,SACE,cAAgB,CACjB,AACD,aACE,aAAc,AACd,kBAAmB,AACnB,SAAU,AACV,gBAAkB,CACnB,AACD,WACE,aAAe,CAChB,AACD,UACE,iBAAmB,CACpB",file:"requirementEditPart2.vue",sourcesContent:["\n.el-rate {\n  margin-top: 8px;\n}\n.reasonError {\n  display: none;\n  position: absolute;\n  top: 100%;\n  margin-top: -10px;\n}\n.errorShow {\n  display: block;\n}\n.relative {\n  position: relative;\n}\n"],sourceRoot:""}])},259:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".city-list{position:relative}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/Info/requirementEditPart1.vue"],names:[],mappings:"AACA,WACE,iBAAmB,CACpB",file:"requirementEditPart1.vue",sourcesContent:["\n.city-list {\n  position: relative;\n}\n"],sourceRoot:""}])},260:function(e,t,a){var n=a(253);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("40e482fc",n,!0)},261:function(e,t,a){var n=a(254);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("12766f78",n,!0)},263:function(e,t,a){var n=a(256);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("b62eab08",n,!0)},264:function(e,t,a){var n=a(257);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("02abb414",n,!0)},265:function(e,t,a){var n=a(258);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("4e4aee20",n,!0)},266:function(e,t,a){var n=a(259);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("19c4e7ce",n,!0)},267:function(e,t,a){function n(e){a(261)}var r=a(132)(a(244),a(274),n,null,null);e.exports=r.exports},268:function(e,t,a){function n(e){a(266)}var r=a(132)(a(245),a(279),n,null,null);e.exports=r.exports},269:function(e,t,a){function n(e){a(265)}var r=a(132)(a(246),a(278),n,null,null);e.exports=r.exports},270:function(e,t,a){function n(e){a(264)}var r=a(132)(a(247),a(277),n,null,null);e.exports=r.exports},271:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"content",class:"position-"+e.city_data.single},[a("div",{staticClass:"pop_city_head"},[e._l(e.letterArr,function(t,n){return a("span",{class:e.type==n?"on":"",on:{click:function(t){e.changeType(n)}}},[e._v("\n            "+e._s(t)+"\n        ")])}),e._v(" "),a("i",{staticClass:"close-icon",on:{click:function(t){t.stopPropagation(),e.hide()}}},[e._v("\n            X\n        ")])],2),e._v(" "),e._l(e.letterArr,function(t,n){return a("div",{staticClass:"pop_city_body",class:e.type==n?"":"hide"},e._l(t.split(""),function(t){return a("div",{staticClass:"pop_city_body_content"},[a("p",[a("strong",[e._v(e._s(t))]),e._v(" "),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:"multiple"==e.single&&"often_conf_city"==e.multiple_type,expression:"single == 'multiple' && multiple_type == 'often_conf_city'"}],model:{value:e.often_conf_city_sel,callback:function(t){e.often_conf_city_sel=t},expression:"often_conf_city_sel"}},e._l(e.cityList[t],function(t){return a("el-checkbox",{staticClass:"item",attrs:{label:t.id,title:t.name,disabled:t.disabledOften},on:{change:function(a){e.sendCityName(t.id,t.name)}}},[e._v("\n                        "+e._s(t.name)+"\n                    ")])})),e._v(" "),a("el-checkbox-group",{directives:[{name:"show",rawName:"v-show",value:"multiple"==e.single&&"occasionally_conf_city"==e.multiple_type,expression:"single == 'multiple' && multiple_type == 'occasionally_conf_city'"}],model:{value:e.occasionally_conf_city_sel,callback:function(t){e.occasionally_conf_city_sel=t},expression:"occasionally_conf_city_sel"}},e._l(e.cityList[t],function(t){return a("el-checkbox",{staticClass:"item",attrs:{label:t.id,title:t.name,disabled:t.disabledOccasionally},on:{change:function(a){e.sendCityName(t.id,t.name)}}},[e._v("\n                        "+e._s(t.name)+"\n                    ")])})),e._v(" "),"single"==e.single?a("el-radio-group",{on:{change:function(t){e.getCityName()}},model:{value:e.city_code,callback:function(t){e.city_code=t},expression:"city_code"}},e._l(e.cityList[t],function(t){return a("el-radio",{staticClass:"item",attrs:{label:t.id+""}},[e._v("\n                        "+e._s(t.name)+"\n                    ")])})):e._e()],1)])}))})],2)},staticRenderFns:[]}},272:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"el-form-item",class:{"is-error":"error"===e.validateState,"is-validating":"validating"===e.validateState,"is-required":e.isRequired||e.required}},[e.label||e.$slots.label?a("label",{staticClass:"el-form-item__label",style:e.labelStyle,attrs:{for:e.prop}},[e._t("label",[e._v(e._s(e.label+e.form.labelSuffix))])],2):e._e(),e._v(" "),a("div",{staticClass:"el-form-item__content",style:e.contentStyle},[e._t("default"),e._v(" "),a("transition",{attrs:{name:"el-zoom-in-top"}},["error"===e.validateState&&e.showMessage&&e.form.showMessage?a("div",{staticClass:"el-form-item__error"},[e._v(e._s(e.validateMessage))]):e._e()])],2)])},staticRenderFns:[]}},273:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement;return(e._self._c||t)("form",{staticClass:"el-form",class:[e.labelPosition?"el-form--label-"+e.labelPosition:"",{"el-form--inline":e.inline}]},[e._t("default")],2)},staticRenderFns:[]}},274:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"orgUserBasicInfo",attrs:{model:e.orgUserBasicInfo,rules:e.baseInfoRules,"label-width":"90px"}},[a("el-row",{staticClass:"row-bg",attrs:{type:"flex",justify:"space-between"}},[a("el-col",{attrs:{md:6}},[a("el-form-item",{attrs:{label:"客户姓名"}},[a("el-input",{on:{blur:function(t){e.changeField("name",e.orgUserBasicInfo.name)}},model:{value:e.orgUserBasicInfo.name,callback:function(t){e.$set(e.orgUserBasicInfo,"name",t)},expression:"orgUserBasicInfo.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:6}},[a("el-form-item",{attrs:{label:"性别","label-width":"50px"}},[a("el-radio-group",{on:{change:function(t){e.changeField("sex",e.orgUserBasicInfo.sex)}},model:{value:e.orgUserBasicInfo.sex,callback:function(t){e.$set(e.orgUserBasicInfo,"sex",t)},expression:"orgUserBasicInfo.sex"}},e._l(e.sex_arr,function(t){return a("el-radio",{staticClass:"sex-radio",attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])}))],1)],1),e._v(" "),a("el-col",{attrs:{md:6}},[a("el-form-item",{attrs:{label:"年龄","label-width":"50px",prop:"age"}},[a("el-input",{on:{blur:function(t){e.changeField("age",e.orgUserBasicInfo.age)}},model:{value:e.orgUserBasicInfo.age,callback:function(t){e.$set(e.orgUserBasicInfo,"age",t)},expression:"orgUserBasicInfo.age"}})],1)],1),e._v(" "),a("el-col",{attrs:{md:6}},[a("el-form-item",{attrs:{label:"居住城市","label-width":"70px"}},[e.orgUserBasicInfo.city_name?a("span",{staticClass:"city-live text-link",on:{click:e.showBeingLivedCity}},[e._v("\n\t\t\t\t\t\t"+e._s(e.orgUserBasicInfo.city_name)+"\n\t\t\t\t\t")]):a("span",{staticClass:"city-live red-text text-link",on:{click:e.showBeingLivedCity}},[e._v("\n\t\t\t\t\t\t点击选择\n\t\t\t\t\t")]),e._v(" "),a("cityList",{directives:[{name:"show",rawName:"v-show",value:e.show_being_lived_city,expression:"show_being_lived_city"}],attrs:{city_data:e.city_data},on:{getCity:e.setCity,hide:function(t){e.hideCityList()}}})],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{md:8}},[a("el-form-item",{attrs:{label:"微信号"}},[a("el-input",{on:{blur:function(t){e.changeField("wechat_code",e.orgUserBasicInfo.wechat_code)}},model:{value:e.orgUserBasicInfo.wechat_code,callback:function(t){e.$set(e.orgUserBasicInfo,"wechat_code",t)},expression:"orgUserBasicInfo.wechat_code"}})],1)],1),e._v(" "),""!=e.orgUserBasicInfo.wechat_code?a("el-col",{attrs:{md:5}},[a("div",{staticClass:"margin-top8"},[a("el-checkbox",{attrs:{"true-label":Number(1),"false-label":Number(0)},on:{change:function(t){e.changeField("add_phone",e.orgUserBasicInfo.add_phone)}},model:{value:e.orgUserBasicInfo.add_phone,callback:function(t){e.$set(e.orgUserBasicInfo,"add_phone",t)},expression:"orgUserBasicInfo.add_phone"}},[e._v("\n\t\t\t\t\t\t是否已添加到工作手机\n\t\t\t\t\t")])],1)]):e._e(),e._v(" "),""!=e.orgUserBasicInfo.wechat_code?a("el-col",{attrs:{md:8}},[a("div",{staticClass:"margin-top8"},[a("el-checkbox",{attrs:{"true-label":Number(1),"false-label":Number(0)},on:{change:function(t){e.changeField("add_flag",e.orgUserBasicInfo.add_flag)}},model:{value:e.orgUserBasicInfo.add_flag,callback:function(t){e.$set(e.orgUserBasicInfo,"add_flag",t)},expression:"orgUserBasicInfo.add_flag"}},[e._v("\n\t\t\t\t\t\t工作手机微信号是否已添加标注\n\t\t\t\t\t")])],1)]):e._e()],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码1",prop:"mobile"}},[a("el-input",{on:{blur:function(t){e.changeField("mobile",e.orgUserBasicInfo.mobile)}},model:{value:e.orgUserBasicInfo.mobile,callback:function(t){e.$set(e.orgUserBasicInfo,"mobile",t)},expression:"orgUserBasicInfo.mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码2",prop:"mobile1"}},[a("el-input",{on:{blur:function(t){e.changeField("mobile1",e.orgUserBasicInfo.mobile1)}},model:{value:e.orgUserBasicInfo.mobile1,callback:function(t){e.$set(e.orgUserBasicInfo,"mobile1",t)},expression:"orgUserBasicInfo.mobile1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"固定号码",prop:"phone"}},[a("el-input",{on:{blur:function(t){e.changeField("phone",e.orgUserBasicInfo.phone)}},model:{value:e.orgUserBasicInfo.phone,callback:function(t){e.$set(e.orgUserBasicInfo,"phone",t)},expression:"orgUserBasicInfo.phone"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"职业"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.changeField("profession_id",e.orgUserBasicInfo.profession_id)}},model:{value:e.orgUserBasicInfo.profession_id,callback:function(t){e.$set(e.orgUserBasicInfo,"profession_id",t)},expression:"orgUserBasicInfo.profession_id"}},e._l(e.baseData.profession,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t")])})),e._v(" "),a("p",{staticClass:"add-data"},[a("span",{on:{click:function(t){e.showAddArea("Profession")}}},[a("i",{class:{"el-icon-minus":e.showProfessionUserDef,"el-icon-plus":!e.showProfessionUserDef}}),e._v("\n               "+e._s(1==e.showProfessionUserDef?" 收起":" ")+"添加自定义职业\n             ")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e.showProfessionUserDef?a("tagAdder",{attrs:{tagData:e.tagData.profession},on:{getUserDefined:e.setUserDefined}}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"职位"}},[a("el-radio-group",{on:{change:function(t){e.changeField("job_id",e.orgUserBasicInfo.job_id)}},model:{value:e.orgUserBasicInfo.job_id,callback:function(t){e.$set(e.orgUserBasicInfo,"job_id",t)},expression:"orgUserBasicInfo.job_id"}},e._l(e.baseData.job,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])})),e._v(" "),a("p",{staticClass:"add-data"},[a("span",{on:{click:function(t){e.showAddArea("Job")}}},[a("i",{class:{"el-icon-minus":e.showJobUserDef,"el-icon-plus":!e.showJobUserDef}}),e._v("\n               "+e._s(1==e.showJobUserDef?" 收起":" ")+"添加自定义职位\n             ")])]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e.showJobUserDef?a("tagAdder",{attrs:{tagData:e.tagData.job},on:{getUserDefined:e.setUserDefined}}):e._e()],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"办会专业度"}},[a("el-radio-group",{on:{change:function(t){e.changeField("specialty",e.orgUserBasicInfo.specialty)}},model:{value:e.orgUserBasicInfo.specialty,callback:function(t){e.$set(e.orgUserBasicInfo,"specialty",t)},expression:"orgUserBasicInfo.specialty"}},e._l(e.specialty_arr,function(t){return a("el-radio",{staticClass:"specialty-radio",attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])}))],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"办会角色"}},[a("el-select",{on:{change:function(t){e.changeField("conf_role",e.orgUserBasicInfo.conf_role)}},model:{value:e.orgUserBasicInfo.conf_role,callback:function(t){e.$set(e.orgUserBasicInfo,"conf_role",t)},expression:"orgUserBasicInfo.conf_role"}},[a("el-option",{attrs:{label:"请选择",value:0}}),e._v(" "),e._l(e.baseData.conf_role,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"在公司角色"}},[a("el-select",{on:{change:function(t){e.changeField("company_role",e.orgUserBasicInfo.company_role)}},model:{value:e.orgUserBasicInfo.company_role,callback:function(t){e.$set(e.orgUserBasicInfo,"company_role",t)},expression:"orgUserBasicInfo.company_role"}},[a("el-option",{attrs:{label:"请选择",value:0}}),e._v(" "),e._l(e.baseData.company_role,function(e){return a("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"办会人备注"}},[a("el-input",{attrs:{type:"textarea"},on:{blur:function(t){e.changeField("comment",e.orgUserBasicInfo.comment)}},model:{value:e.orgUserBasicInfo.comment,callback:function(t){e.$set(e.orgUserBasicInfo,"comment",t)},expression:"orgUserBasicInfo.comment"}},[e._v("\n            "+e._s(e.orgUserBasicInfo.comment)+"\n          ")])],1)],1)],1),e._v(" "),a("h2",[e._v("推荐人/友好关系人")]),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"姓名"}},[a("el-input",{on:{blur:function(t){e.changeField("recommand_name",e.orgUserBasicInfo.recommand_name)}},model:{value:e.orgUserBasicInfo.recommand_name,callback:function(t){e.$set(e.orgUserBasicInfo,"recommand_name",t)},expression:"orgUserBasicInfo.recommand_name"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码1",prop:"recommand_mobile"}},[a("el-input",{on:{change:function(t){e.getRecommandInfo(e.orgUserBasicInfo.recommand_mobile)},blur:function(t){e.changeField("recommand_mobile",e.orgUserBasicInfo.recommand_mobile)}},model:{value:e.orgUserBasicInfo.recommand_mobile,callback:function(t){e.$set(e.orgUserBasicInfo,"recommand_mobile",t)},expression:"orgUserBasicInfo.recommand_mobile"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"手机号码2",prop:"recommand_mobile1"}},[a("el-input",{on:{blur:function(t){e.changeField("recommand_mobile1",e.orgUserBasicInfo.recommand_mobile1)}},model:{value:e.orgUserBasicInfo.recommand_mobile1,callback:function(t){e.$set(e.orgUserBasicInfo,"recommand_mobile1",t)},expression:"orgUserBasicInfo.recommand_mobile1"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"固定号码",prop:"recommand_phone"}},[a("el-input",{on:{blur:function(t){e.changeField("recommand_phone",e.orgUserBasicInfo.recommand_phone)}},model:{value:e.orgUserBasicInfo.recommand_phone,callback:function(t){e.$set(e.orgUserBasicInfo,"recommand_phone",t)},expression:"orgUserBasicInfo.recommand_phone"}})],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:24}},[e.recommandInfo.isEmpty?e._e():a("el-form-item",{attrs:{label:"推荐人信息"}},[a("router-link",{attrs:{to:"/foreground/index/userview/"+e.recommandInfo.data.rec_mobile+"/"+e.recommandInfo.data.company_id+"/"+e.recommandInfo.data.customer_id}},[a("el-button",{attrs:{size:"small"}},[e._v("点击查看")])],1)],1)],1)],1),e._v(" "),2==e.status?a("el-button",{staticClass:"margin-bottom10",attrs:{type:"primary",disabled:e.isInSave},on:{click:function(t){e.save()}}},[e._v("\n\t\t\t保存\n\t\t")]):e._e()],1)},staticRenderFns:[]}},276:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"请输入","label-width":"50px"}},["profession"==e.tagAdderData.tag?a("el-input",{model:{value:e.addTagData.profession.name,callback:function(t){e.$set(e.addTagData.profession,"name","string"==typeof t?t.trim():t)},expression:"addTagData.profession.name"}}):e._e(),e._v(" "),"has_other_req"==e.tagAdderData.tag?a("el-input",{model:{value:e.addTagData.has_other_req.name,callback:function(t){e.$set(e.addTagData.has_other_req,"name","string"==typeof t?t.trim():t)},expression:"addTagData.has_other_req.name"}}):e._e(),e._v(" "),"personal_tag"==e.tagAdderData.tag?a("el-input",{model:{value:e.addTagData.personal_tag.name,callback:function(t){e.$set(e.addTagData.personal_tag,"name","string"==typeof t?t.trim():t)},expression:"addTagData.personal_tag.name"}}):e._e(),e._v(" "),"department"==e.tagAdderData.tag?a("el-input",{model:{value:e.addTagData.department.name,callback:function(t){e.$set(e.addTagData.department,"name","string"==typeof t?t.trim():t)},expression:"addTagData.department.name"}}):e._e(),e._v(" "),"job"==e.tagAdderData.tag?a("el-input",{model:{value:e.addTagData.job.name,callback:function(t){e.$set(e.addTagData.job,"name","string"==typeof t?t.trim():t)},expression:"addTagData.job.name"}}):e._e()],1),e._v(" "),a("el-button",{attrs:{size:"small",type:"primary"},on:{click:function(t){e.submitTag(e.addTagData[e.tagAdderData.tag].type,e.tagAdderData.tag)}}},[e._v("\n\t\t\t添加\n\t\t")])],1)},staticRenderFns:[]}},277:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form4",attrs:{model:e.orgcompanyfeature,rules:e.editThreeRulers,"label-width":"140px"}},[a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"企业常办会部门"}},[a("el-row",[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("conf_department")}},model:{value:e.orgcompanyfeature.conf_department,callback:function(t){e.$set(e.orgcompanyfeature,"conf_department",t)},expression:"orgcompanyfeature.conf_department"}},e._l(e.baseData.department,function(t){return a("el-checkbox",{attrs:{label:t.id+""}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t\t")])})),e._v(" "),a("p",{staticClass:"add-data"},[a("span",{on:{click:function(t){e.showAddArea("ConfDepartment")}}},[a("i",{class:{"el-icon-minus":e.showConfDepartmentUserDef,"el-icon-plus":!e.showConfDepartmentUserDef}}),e._v("\n              "+e._s(1==e.showConfDepartmentUserDef?" 收起":" ")+"添加自定义企业常办会部门\n              ")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e.showConfDepartmentUserDef?a("tagAdder",{attrs:{tagData:e.tagData.department},on:{getUserDefined:e.setUserDefined}}):e._e()],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"企业决策方式"}},[a("el-select",{on:{change:function(t){e.changeField("decision_type",e.orgcompanyfeature.decision_type)}},model:{value:e.orgcompanyfeature.decision_type,callback:function(t){e.$set(e.orgcompanyfeature,"decision_type",t)},expression:"orgcompanyfeature.decision_type"}},[a("el-option",{attrs:{label:"请选择",value:0}}),e._v(" "),e._l(e.baseData.decision_method,function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"是否是采购决策人"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.resetDecisionUser()}},model:{value:e.orgcompanyfeature.is_decisionmaker,callback:function(t){e.$set(e.orgcompanyfeature,"is_decisionmaker",t)},expression:"orgcompanyfeature.is_decisionmaker"}},e._l(e.is_decisionmaker_arr,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t  \t\t"+e._s(t.name)+"\n\t\t\t\t\t  \t")])}))],1),e._v(" "),e.showDecisionUser?a("div",[a("el-row",{staticClass:"margin-bottom10"},[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"决策人姓名","label-width":"90px"}},[a("el-input",{on:{blur:function(t){e.setDecisionUser()}},model:{value:e.orgcompanyfeature.decision_user.name,callback:function(t){e.$set(e.orgcompanyfeature.decision_user,"name",t)},expression:"orgcompanyfeature.decision_user.name"}})],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"决策人所在部门","label-width":"110px"}},[a("el-select",{on:{change:function(t){e.setDecisionUser()}},model:{value:e.orgcompanyfeature.decision_user.department_id,callback:function(t){e.$set(e.orgcompanyfeature.decision_user,"department_id",t)},expression:"orgcompanyfeature.decision_user.department_id"}},[a("el-option",{attrs:{label:"请选择部门",value:0}}),e._v(" "),e._l(e.baseData.department,function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"决策人职位","label-width":"90px"}},[a("el-select",{on:{change:function(t){e.setDecisionUser()}},model:{value:e.orgcompanyfeature.decision_user.job_id,callback:function(t){e.$set(e.orgcompanyfeature.decision_user,"job_id",t)},expression:"orgcompanyfeature.decision_user.job_id"}},[a("el-option",{attrs:{label:"请选择职位",value:0}}),e._v(" "),e._l(e.baseData.job,function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1)],1),e._v(" "),a("el-col",{attrs:{span:10}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"决策人联系方式",prop:"decision_user.phone","label-width":"110px"}},[a("el-input",{on:{blur:function(t){e.setDecisionUser()}},model:{value:e.orgcompanyfeature.decision_user.phone,callback:function(t){e.$set(e.orgcompanyfeature.decision_user,"phone",t)},expression:"orgcompanyfeature.decision_user.phone"}})],1)],1)],1)],1):e._e()],1)],1),e._v(" "),a("el-row",[a("el-form-item",{attrs:{label:"了解到客户内部的采购决策情况","label-width":"250px"}}),e._v(" "),a("el-form-item",[a("el-input",{attrs:{type:"textarea",placeholder:"请输入了解到客户内部的采购决策情况"},on:{blur:function(t){e.changeField("decision_comment",e.orgcompanyfeature.decision_comment)}},model:{value:e.orgcompanyfeature.decision_comment,callback:function(t){e.$set(e.orgcompanyfeature,"decision_comment",t)},expression:"orgcompanyfeature.decision_comment"}})],1)],1),e._v(" "),2==e.status?a("el-button",{staticClass:"margin-bottom10",attrs:{type:"primary",disabled:e.isInSave},on:{click:function(t){e.save()}}},[e._v("\n\t\t\t保存\n\t\t")]):e._e()],1)},staticRenderFns:[]}},278:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form3",attrs:{model:e.orguserfeature,rules:e.editTwoRules,"label-width":"140px"}},[a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"偏好场地类型"}},[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("site_type")}},model:{value:e.orguserfeature.site_type,callback:function(t){e.$set(e.orguserfeature,"site_type",t)},expression:"orguserfeature.site_type"}},e._l(e.baseData.banquet_type,function(t){return a("el-checkbox",{attrs:{label:t.id+""}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t")])}))],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"偏好调性"}},[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("preference")}},model:{value:e.orguserfeature.preference,callback:function(t){e.$set(e.orguserfeature,"preference",t)},expression:"orguserfeature.preference"}},e._l(e.baseData.style_feature,function(t){return a("el-checkbox",{attrs:{label:t.id+""}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t")])}))],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"经常使用场地区域"}},[a("el-row",e._l(e.often_conf_area,function(t){return a("el-checkbox",{attrs:{checked:Boolean(t.selected)},on:{change:function(t){e.setOftenConfArea()}},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"item.selected"}},[e._v("\n\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t")])})),e._v(" "),a("el-row")],1),e._v(" "),a("el-row",{staticClass:"relative"},e._l(e.often_conf_area,function(t){return a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:t.selected,expression:"item.selected"}],attrs:{label:t.name}},[a("el-input",{staticClass:"margin-bottom10",attrs:{placeholder:"原因"},on:{blur:function(t){e.setOftenConfArea()}},model:{value:t.comment,callback:function(a){e.$set(t,"comment","string"==typeof a?a.trim():a)},expression:"item.comment"}}),e._v(" "),a("div",{staticClass:"el-form-item__error reasonError",class:{errorShow:""==t.comment}},[e._v("请输入原因")])],1)}))],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"决策快慢"}},[a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择决策速度"},on:{change:function(t){e.resetFiledDecisionReason()}},model:{value:e.orguserfeature.decision,callback:function(t){e.$set(e.orguserfeature,"decision",t)},expression:"orguserfeature.decision"}},[a("el-option",{attrs:{label:"请选择",value:0}}),e._v(" "),e._l(e.decisionSpeed_arr,function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.orguserfeature.decision,expression:"orguserfeature.decision == 1"}],attrs:{span:8}},[a("el-form-item",{attrs:{prop:"decision_reason"}},[a("el-select",{attrs:{placeholder:"请选择决策快的原因"},on:{change:function(t){e.changeField("decision_reason",e.orguserfeature.decision_reason)}},model:{value:e.orguserfeature.decision_reason,callback:function(t){e.$set(e.orguserfeature,"decision_reason",t)},expression:"orguserfeature.decision_reason"}},[a("el-option",{attrs:{label:"请选择原因",value:0}}),e._v(" "),e._l(e.baseData.decision_reason_fast,function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1)],1),e._v(" "),a("el-col",{directives:[{name:"show",rawName:"v-show",value:3==e.orguserfeature.decision,expression:"orguserfeature.decision == 3"}],attrs:{span:8}},[a("el-form-item",{attrs:{prop:"decision_reason"}},[a("el-select",{attrs:{placeholder:"请选择决策慢的原因"},on:{change:function(t){e.changeField("decision_reason",e.orguserfeature.decision_reason)}},model:{value:e.orguserfeature.decision_reason,callback:function(t){e.$set(e.orguserfeature,"decision_reason",t)},expression:"orguserfeature.decision_reason"}},[a("el-option",{attrs:{label:"请选择原因",value:0}}),e._v(" "),e._l(e.baseData.decision_reason_slow,function(e){return a("el-option",{attrs:{label:e.name,value:e.id}})})],2)],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"客户价格敏感度"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.setParticipantComment()}},model:{value:e.orguserfeature.participant[0].id,callback:function(t){e.$set(e.orguserfeature.participant[0],"id",t)},expression:"orguserfeature.participant[0].id"}},e._l(e.baseData.price_sensitive,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t  \t\t"+e._s(t.name)+"\n\t\t\t\t\t  \t")])}))],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:0!=e.orguserfeature.participant[0].id,expression:"orguserfeature.participant[0].id!=0"}]},[a("el-form-item",{attrs:{prop:"participant[0].comment"}},[a("el-input",{attrs:{type:"textarea",placeholder:"原因"},on:{blur:function(t){e.setParticipant()}},model:{value:e.orguserfeature.participant[0].comment,callback:function(t){e.$set(e.orguserfeature.participant[0],"comment",t)},expression:"orguserfeature.participant[0].comment"}})],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"房餐会次数占比"}},[a("el-row",[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"房餐会"}}),e._v(" "),a("el-input",{on:{blur:function(t){e.setPercentageNum()}},model:{value:e.orguserfeature.percentage.percentage,callback:function(t){e.$set(e.orguserfeature.percentage,"percentage",t)},expression:"orguserfeature.percentage.percentage"}}),e._v(" %\n\t\t\t\t\t")],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"纯会、餐会、房会"}}),e._v(" "),a("el-input",{attrs:{disabled:!0},model:{value:e.conf_percentage,callback:function(t){e.conf_percentage=t},expression:"conf_percentage"}}),e._v(" %\n\t\t\t\t\t")],1)],1),e._v(" "),a("el-row",{directives:[{name:"show",rawName:"v-show",value:""!=e.orguserfeature.percentage.percentage&&"0"!=e.orguserfeature.percentage.percentage&&"0.00"!=e.orguserfeature.percentage.percentage,expression:"orguserfeature.percentage.percentage!=''&&orguserfeature.percentage.percentage!='0'&&orguserfeature.percentage.percentage!='0.00'"}]},[a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"房餐会次数"}}),e._v(" "),a("el-input",{on:{blur:function(t){e.setPercentageField("num")}},model:{value:e.orguserfeature.percentage.num,callback:function(t){e.$set(e.orguserfeature.percentage,"num",t)},expression:"orguserfeature.percentage.num"}}),e._v(" 次\n\n\t\t\t\t\t")],1),e._v(" "),a("el-col",{attrs:{span:6}},[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"房餐会平均每场"}}),e._v(" "),a("el-input",{on:{blur:function(t){e.setPercentageField("price")}},model:{value:e.orguserfeature.percentage.price,callback:function(t){e.$set(e.orguserfeature.percentage,"price",t)},expression:"orguserfeature.percentage.price"}}),e._v(" 万\n            "),a("div",{directives:[{name:"show",rawName:"v-show",value:""!=e.orguserfeature.percentage.price&&e.orguserfeature.percentage.price>1e4,expression:"orguserfeature.percentage.price!=''\n            &&orguserfeature.percentage.price>10000"}],staticClass:"el-form-item__error "},[e._v("房餐会平均每场必须小于10000万")]),e._v(" "),a("div",{directives:[{name:"show",rawName:"v-show",value:!(""!=e.orguserfeature.percentage.price&&e.orguserfeature.percentage.price>1e4)&&""!=e.orguserfeature.percentage.num&&e.orguserfeature.percentage.num<=0,expression:"\n            !(orguserfeature.percentage.price!=''\n            &&orguserfeature.percentage.price>10000)\n            &&orguserfeature.percentage.num!=''&&\n           orguserfeature.percentage.num<=0"}],staticClass:"el-form-item__error "},[e._v("房参会次数必须大于0")])],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"是否有策划搭建需求"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.resetBuildRequireType()}},model:{value:e.orguserfeature.build_require,callback:function(t){e.$set(e.orguserfeature,"build_require",t)},expression:"orguserfeature.build_require"}},e._l(e.establishReq_arr,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t  \t\t"+e._s(t.name)+"\n\t\t\t\t\t  \t")])}))],1),e._v(" "),e.hideBuildRequireType?e._e():a("el-row",[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("build_require_type")}},model:{value:e.orguserfeature.build_require_type,callback:function(t){e.$set(e.orguserfeature,"build_require_type",t)},expression:"orguserfeature.build_require_type"}},e._l(e.baseData.has_other_req,function(t){return a("el-checkbox",{attrs:{label:t.id+""}},[e._v("\n\t\t\t\t\t\t  \t"+e._s(t.name)+"\n\t\t\t\t\t\t")])})),e._v(" "),a("p",{staticClass:"add-data"},[a("span",{on:{click:function(t){e.showAddArea("BuildReq")}}},[a("i",{class:{"el-icon-minus":e.showBuildReqUserDef,"el-icon-plus":!e.showBuildReqUserDef}}),e._v("\n            "+e._s(1==e.showBuildReqUserDef?" 收起":" ")+"添加其余会务需求\n          ")]),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e.showBuildReqUserDef?a("tagAdder",{attrs:{tagData:e.tagData.has_other_req},on:{getUserDefined:e.setUserDefined}}):e._e()],1)],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"客户特质"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.changeField("trait",e.orguserfeature.trait)}},model:{value:e.orguserfeature.trait,callback:function(t){e.$set(e.orguserfeature,"trait",t)},expression:"orguserfeature.trait"}},e._l(e.baseData.personal_feature,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t\t")])}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"客户个性标签"}},[a("el-row",[a("el-checkbox-group",{model:{value:e.orguserfeature.customer_tag,callback:function(t){e.$set(e.orguserfeature,"customer_tag",t)},expression:"orguserfeature.customer_tag"}},e._l(e.baseData.personal_tag,function(t){return a("el-checkbox",{attrs:{label:t.id+""},on:{change:function(t){e.setArrToString("customer_tag")}}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t\t")])})),e._v(" "),a("p",{staticClass:"add-data"},[a("span",{on:{click:function(t){e.showAddArea("PersonalTag")}}},[a("i",{class:{"el-icon-minus":e.showPersonalTagUserDef,"el-icon-plus":!e.showPersonalTagUserDef}}),e._v("\n              "+e._s(1==e.showPersonalTagUserDef?" 收起":" ")+"添加自定义客户个性标签\n            ")])])],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:12}},[e.showPersonalTagUserDef?a("tagAdder",{attrs:{tagData:e.tagData.personal_tag},on:{getUserDefined:e.setUserDefined}}):e._e()],1)],1)],1)],1),e._v(" "),2==e.status?a("el-button",{staticClass:"margin-bottom10",attrs:{type:"primary",disabled:e.isInSave},on:{click:function(t){e.save()}}},[e._v("\n\t\t\t保存\n\t\t")]):e._e()],1)},staticRenderFns:[]}},279:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("el-form",{ref:"form2",attrs:{model:e.orgreqinfo,rules:e.editOneRulers,"label-width":"140px"}},[a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.baseData.year-1+"年会议总预算"}},[a("el-input",{on:{blur:function(t){e.changeField("prev_year_budget",e.orgreqinfo.prev_year_budget)}},model:{value:e.orgreqinfo.prev_year_budget,callback:function(t){e.$set(e.orgreqinfo,"prev_year_budget",t)},expression:"orgreqinfo.prev_year_budget"}}),e._v("  万\n          "),a("el-row",[a("div",{directives:[{name:"show",rawName:"v-show",value:e.orgreqinfo.prev_year_budget>1e4,expression:"orgreqinfo.prev_year_budget>10000"}],staticClass:"el-form-item__error reasonError"},[e._v("不能大于10000万")])])],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:e.baseData.year+"年会议总次数"}},[a("el-input",{on:{blur:function(t){e.changeField("current_year_num",e.orgreqinfo.current_year_num)}},model:{value:e.orgreqinfo.current_year_num,callback:function(t){e.$set(e.orgreqinfo,"current_year_num",t)},expression:"orgreqinfo.current_year_num"}}),e._v("  次\n\t\t\t\t")],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{label:e.baseData.year+1+"年预计会议"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.resetReason()}},model:{value:e.orgreqinfo.next_conf_info,callback:function(t){e.$set(e.orgreqinfo,"next_conf_info",t)},expression:"orgreqinfo.next_conf_info"}},e._l(e.trend_arr,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t")])}))],1),e._v(" "),a("el-row",[a("el-col",{directives:[{name:"show",rawName:"v-show",value:0!=e.orgreqinfo.next_conf_info,expression:"orgreqinfo.next_conf_info!=0"}],attrs:{span:24}},[a("el-form-item",{attrs:{prop:"reason"}},[a("el-input",{ref:"budgetReason",attrs:{type:"textarea",placeholder:"原因"},on:{blur:function(t){e.changeField("reason",e.orgreqinfo.reason)}},model:{value:e.orgreqinfo.reason,callback:function(t){e.$set(e.orgreqinfo,"reason",t)},expression:"orgreqinfo.reason"}})],1)],1)],1)],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"通过会小二的预定金额占比"}},[a("el-input",{on:{blur:function(t){e.changeField("hxe_percentage",e.orgreqinfo.hxe_percentage)}},model:{value:e.orgreqinfo.hxe_percentage,callback:function(t){e.$set(e.orgreqinfo,"hxe_percentage",t)},expression:"orgreqinfo.hxe_percentage"}}),e._v(" %\n\t\t\t\t")],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{staticClass:"short-input",attrs:{label:"举办会议消费区间"}},e._l(e.baseData.consumption,function(t){return a("el-col",{staticClass:"margin-bottom10",attrs:{md:6}},[a("span",[e._v(e._s(t.name))]),e._v(" "),a("el-input",{on:{blur:function(a){e.setConsumptionInterval(t.id,e.consumption_interval["times_"+t.id])}},model:{value:e.consumption_interval["times_"+t.id],callback:function(a){e.$set(e.consumption_interval,"times_"+t.id,e._n(a))},expression:"consumption_interval['times_'+item.id]"}}),e._v(" 次\n\t\t\t\t")],1)}))],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"经常举办会议类型"}},[a("el-row",{attrs:{justify:"space-around"}},[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("often_conf_type")}},model:{value:e.orgreqinfo.often_conf_type,callback:function(t){e.$set(e.orgreqinfo,"often_conf_type",t)},expression:"orgreqinfo.often_conf_type"}},e._l(e.baseData.meeting_type,function(t){return a("el-checkbox",{attrs:{label:t.id+""}},[e._v("\n\t\t\t\t\t  \t\t"+e._s(t.name)+"\n\t\t\t\t\t  \t")])}))],1)],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"是否要异地办会"}},[a("el-row",[a("el-radio-group",{on:{change:function(t){e.resetAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf,callback:function(t){e.$set(e.orgreqinfo,"allopatry_conf",t)},expression:"orgreqinfo.allopatry_conf"}},e._l(e.diffpalce_arr,function(t){return a("el-radio",{attrs:{label:t.id}},[e._v("\n\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t")])}))],1),e._v(" "),1==e.orgreqinfo.allopatry_conf?a("div",[a("el-row",[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"常跨地区举办的两种会议","label-width":"180px"}})],1),e._v(" "),a("el-row",{staticClass:"margin-bottom10"},[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择会议类型"},on:{change:function(t){e.setAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf_info[0].id,callback:function(t){e.$set(e.orgreqinfo.allopatry_conf_info[0],"id",t)},expression:"orgreqinfo.allopatry_conf_info[0].id"}},[a("el-option",{attrs:{label:"请选择会议类型",value:0}}),e._v(" "),e._l(e.baseData.meeting_type,function(t){return a("el-option",{attrs:{label:t.name,value:t.id,disabled:e.orgreqinfo.allopatry_conf_info[1].id==t.id}},[e._v(e._s(t.name)+"\n\t\t\t\t\t\t\t    ")])})],2)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平均消费金额","label-width":"100px"}},[a("el-input",{on:{blur:function(t){e.setAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf_info[0].price,callback:function(t){e.$set(e.orgreqinfo.allopatry_conf_info[0],"price",e._n(t))},expression:"orgreqinfo.allopatry_conf_info[0].price"}}),e._v(" 万\n\t\t\t\t\t\t  \t")],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"大致次数","label-width":"100px"}},[a("el-input",{on:{blur:function(t){e.setAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf_info[0].num,callback:function(t){e.$set(e.orgreqinfo.allopatry_conf_info[0],"num",e._n(t))},expression:"orgreqinfo.allopatry_conf_info[0].num"}}),e._v(" 次\n\t\t\t\t\t\t  \t")],1)],1)],1),e._v(" "),a("el-row",[a("el-col",{attrs:{span:8}},[a("el-select",{attrs:{placeholder:"请选择会议类型"},on:{change:function(t){e.setAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf_info[1].id,callback:function(t){e.$set(e.orgreqinfo.allopatry_conf_info[1],"id",t)},expression:"orgreqinfo.allopatry_conf_info[1].id"}},[a("el-option",{attrs:{label:"请选择会议类型",value:0}}),e._v(" "),e._l(e.baseData.meeting_type,function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id,disabled:e.orgreqinfo.allopatry_conf_info[0].id==t.id}})})],2)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"平均消费金额","label-width":"100px"}},[a("el-input",{on:{blur:function(t){e.setAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf_info[1].price,callback:function(t){e.$set(e.orgreqinfo.allopatry_conf_info[1],"price",e._n(t))},expression:"orgreqinfo.allopatry_conf_info[1].price"}}),e._v(" 万\n\t\t\t\t\t\t  \t")],1)],1),e._v(" "),a("el-col",{attrs:{span:8}},[a("el-form-item",{attrs:{label:"大致次数","label-width":"100px"}},[a("el-input",{on:{blur:function(t){e.setAllopatryConfInfo()}},model:{value:e.orgreqinfo.allopatry_conf_info[1].num,callback:function(t){e.$set(e.orgreqinfo.allopatry_conf_info[1],"num",e._n(t))},expression:"orgreqinfo.allopatry_conf_info[1].num"}}),e._v(" 次\n\t\t\t\t\t\t  \t")],1)],1)],1),e._v(" "),a("el-row",[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"常举办城市"}})],1),e._v(" "),a("el-row",[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("often_conf_city"),e.disabledCity("OftenCityListSel")}},model:{value:e.orgreqinfo.often_conf_city,callback:function(t){e.$set(e.orgreqinfo,"often_conf_city",t)},expression:"orgreqinfo.often_conf_city"}},e._l(e.city_self,function(t){return a("el-checkbox",{attrs:{label:t.id,disabled:t.disabledOften}},[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\n\t\t\t\t\t\t\t")])}))],1),e._v(" "),a("el-row",[a("span",{staticClass:"city-list add-data pointer",on:{click:function(t){e.showOftenCityList(!0)}}},[e._v("+添加城市")]),e._v(" "),a("cityList",{directives:[{name:"show",rawName:"v-show",value:e.often_city_list_show,expression:"often_city_list_show"}],ref:"OftenCityListSel",attrs:{city_data:e.city_data},on:{getCityAll:e.setCityAll,hide:function(t){e.showOftenCityList(!1)}}})],1),e._v(" "),a("el-row",[a("el-form-item",{staticClass:"text-align-left",attrs:{label:"有时举办城市"}})],1),e._v(" "),a("el-row",[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("occasionally_conf_city"),e.disabledCity("OccasionallyCityListSel")}},model:{value:e.orgreqinfo.occasionally_conf_city,callback:function(t){e.$set(e.orgreqinfo,"occasionally_conf_city",t)},expression:"orgreqinfo.occasionally_conf_city"}},e._l(e.city_self,function(t){return a("el-checkbox",{attrs:{label:t.id,disabled:t.disabledOccasionally}},[e._v(" "+e._s(t.name)+"\n\n\t\t\t\t\t\t\t")])}))],1),e._v(" "),a("el-row",[a("span",{staticClass:"city-list add-data pointer",on:{click:function(t){e.showOccasionallyCityList(!0)}}},[e._v("+添加城市")]),e._v(" "),a("cityList",{directives:[{name:"show",rawName:"v-show",value:e.occasionally_city_list_show,expression:"occasionally_city_list_show"}],ref:"OccasionallyCityListSel",attrs:{city_data:e.city_data},on:{getCityAll:e.setCityAll,hide:function(t){e.showOccasionallyCityList(!1)}}})],1)],1):e._e()],1)],1),e._v(" "),a("el-row",{attrs:{justify:"space-around"}},[a("el-form-item",{attrs:{label:"会议参会人类型"}},[a("el-checkbox-group",{on:{change:function(t){e.setArrToString("participant_type")}},model:{value:e.orgreqinfo.participant_type,callback:function(t){e.$set(e.orgreqinfo,"participant_type",t)},expression:"orgreqinfo.participant_type"}},e._l(e.baseData.attendence_type,function(t){return a("el-checkbox",{attrs:{label:t.id}},[e._v(" "+e._s(t.name)+"\n\t\t\t\t  \t")])}))],1)],1),e._v(" "),2==e.status?a("el-button",{staticClass:"margin-bottom10",attrs:{type:"primary",disabled:e.isInSave},on:{click:function(t){e.save()}}},[e._v("\n\t\t\t保存\n\t\t")]):e._e()],1)},staticRenderFns:[]}},282:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=a(133),r=a.n(n),o=a(23),i=a.n(o),s=a(235),c=a.n(s),l=a(267),f=a.n(l),u=a(268),d=a.n(u),p=a(269),_=a.n(p),m=a(270),g=a.n(m);t.default={data:function(){var e=this;return{creating:!1,isCreating:!1,time:"",timer:null,status:1,customer_id:"",company_id:e.$route.params.company_id,mobile:e.$route.params.mobile,baseData:{},city:[],area:[],storageId:"draft_"+e.$route.params.mobile+e.$route.params.company_id,countDownDesc:"",changeFieldLen:0,changeFieldLen1:0,changeFieldLen2:0,changeFieldLen3:0,changeFieldLen4:0,couldBeCreated:!1,changeTimes:0,changeTimesUser:0,userBasicInfoArr:["name","sex","age","city","wechat_code","add_phone","add_flag","mobile","mobile1","phone","profession_id","job_id","specialty","conf_role","company_role","recommand_name","recommand_mobile","recommand_mobile1","recommand_phone","comment"],orguserbasicinfo:{},destuserbasicinfo:{},userDefinedData:{profession:[],has_other_req:[],personal_tag:[],department:[],job:[]},userbasicRule:[{name:"age",rule:/^[1-9][0-9]$|^[1-9]$/,desc:"年龄范围为1-99"},{name:"mobile",rule:/^1[345678]\d{9}$/,desc:"手机码号1格式不正确"},{name:"mobile1",rule:/^1[345678]\d{9}$/,desc:"手机码号2格式不正确"},{name:"recommand_mobile",rule:/^1[345678]\d{9}$/,desc:"推荐人手机码号1格式不正确"},{name:"recommand_mobile1",rule:/^1[345678]\d{9}$/,desc:"推荐人手机码号2格式不正确"},{name:"recommand_phone",rule:/^0\d{2,3}-?\d{7,8}$/,desc:"推荐人固定电话号码格式不正确"}],reqRule:[{name:"prev_year_budget",rule:/^[1-9]([0-9]{0,3}|[0-0]{4})$/,desc:"会议总预算必须为正整数且不能大于10000万"},{name:"current_year_num",rule:/^[0-9]+$/,desc:"会议总次数必须为正整数"},{name:"hxe_percentage",rule:/^([0-9]\d?(\.\d{1,2})?|0.\d{1,2}|100)$/,desc:"通过小二预定占比必须为小于100的正整数"},{name:"next_conf_info"}],consumptionRule:{},userfeatureRule:[{name:"percentage",rule:/^(0|([1-9][0-9]?)|(100))(\.\d{0,2})?$/,desc:"房餐会的比例必须为小于等于100的数"},{name:"conf_percentage",rule:/^(0|([1-9][0-9]?)|(100))(\.\d{0,2})?$/,desc:"纯会的比例必须为小于100的正整数"},{name:"num",rule:/^[1-9][0-9]*$/,desc:"房餐会次数必须为整数且大于0"},{name:"price",rule:/^[1-9]([0-9]{0,3}|[0-0]{4})$/,desc:"房餐会平均每场金额必须为正整数且不能大于10000万"},{name:"participant"},{name:"often_conf_area"},{name:"decision"}],userbasicinfo:{mobile:"",mobile1:"",name:"",sex:"",age:"",city:"",city_name:"",add_phone:"",add_flag:"",wechat_code:"",phone:"",profession_id:"",job_id:"",conf_role:"",company_role:"",specialty:"",comment:"",recommand_id:"",recommand_name:"",recommand_mobile:"",recommand_mobile1:"",recommand_phone:"",recommand_new_mobile:"",recommand_company_id:""},reqinfo:{},userfeature:{},companyfeature:{}}},created:function(){var e=this;e.company_id=e.$route.params.company_id,e.mobile=e.$route.params.mobile,e.getBasicData(),e.getCustomerStatus(),1==e.status&&e.setlocalData()},watch:{$route:function(e,t){var a=this;a.resetData(),a.company_id=a.$route.params.company_id,a.mobile=a.$route.params.mobile,a.getBasicData(),a.getCustomerStatus(),1==a.status&&a.setlocalData()}},methods:{setlocalData:function(){var e=this,t=e.storageId;if(localStorage.getItem(t)){var a=JSON.parse(localStorage.getItem(t));if(a.reqinfo)for(var n in a.reqinfo){e.reqinfo=a.reqinfo;break}if(a.userfeature)for(var r in a.userfeature){e.userfeature=a.userfeature;break}if(a.companyfeature)for(var o in a.companyfeature){e.companyfeature=a.companyfeature;break}}},resetData:function(){var e=this;e.changeFieldLen=0,e.changeFieldLen1=0,e.changeFieldLen2=0,e.changeFieldLen3=0,e.changeFieldLen4=0,e.couldBeCreated=!1,e.userbasicinfo={mobile:"",mobile1:"",name:"",sex:"",age:"",city:"",city_name:"",add_phone:"",add_flag:"",wechat_code:"",phone:"",profession_id:"",job_id:"",conf_role:"",company_role:"",specialty:"",comment:"",recommand_id:"",recommand_name:"",recommand_mobile:"",recommand_mobile1:"",recommand_phone:"",recommand_new_mobile:"",recommand_company_id:""},e.reqinfo={},e.userfeature={},e.companyfeature={},e.orguserbasicinfo={},e.destuserbasicinfo={},e.changeTimes=0,e.changeTimesUser=0,e.creating=!1,e.city=[],e.area=[],e.userDefinedData={profession:[],has_other_req:[],personal_tag:[],department:[]},e.storageId="draft_"+e.$route.params.mobile+e.$route.params.company_id},setTimeCountDown:function(e){var t=this;clearInterval(t.timer),t.timer=setInterval(function(){if(0==--t.time)return t.countDownDesc=1==e?"您未在一个小时内完成录入，请稍后从新进入完成录入":"您现在可以编辑了，请在客户列表点击客户开始编辑。",void clearInterval(t.timer);var a=Math.floor(t.time/60),n=Math.floor(t.time-60*a);t.countDownDesc=1==e?"完成创建倒计时: "+a+"分 "+n+"秒":"此客户正在有其他同事在编辑，如果在"+a+"分 "+n+"秒后，此同事未完成编辑，您才可以进行编辑"},1e3)},getCustomerStatus:function(){var e=this;e.$ajax.post(e.$api.getModuleHost("CRM","customer/getCustomerStatus"),{company_id:e.company_id,mobile:e.mobile}).then(function(t){if(e.$emit("querySuc"),1e3==t.code){if(0==t.data.authority)return e.creating=!0,void(e.countDownDesc=t.data.message);e.time=t.data.time,1==t.data.status?(e.setTimeCountDown(1),e.creating=!1):(e.setTimeCountDown(2),e.creating=!0),e.$emit("setCustomerStatusId",t.data.id)}}).catch(function(e){console.error(e)})},getBasicData:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","customer/getBasicData")).then(function(t){if(1e3==t.code){e.baseData=t.data,e.baseData.decision_reason_fast=e.baseData.decision_reason[0],e.baseData.decision_reason_slow=e.baseData.decision_reason[1],e.city.length&&(e.city=[]),e.area.length&&(e.area=[]);var a=!0,n=!1,r=void 0;try{for(var o,i=c()(e.baseData.consumption);!(a=(o=i.next()).done);a=!0){var s=o.value;e.consumptionRule["cons_"+s.id]="会议消费区间"+s.name+"必须为正整数"}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}var l=!0,f=!1,u=void 0;try{for(var d,p=c()(e.baseData.city);!(l=(d=p.next()).done);l=!0){var _=d.value,m={id:_.id,name:_.name,disabledOften:!1,disabledOccasionally:!1};e.city.push(m)}}catch(e){f=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw u}}1==e.status&&e.$refs.part1.disabledCity("",e.city);var g=!0,y=!1,v=void 0;try{for(var h,b=c()(e.baseData.area);!(g=(h=b.next()).done);g=!0){var A=h.value,m={id:A.id,name:A.name,selected:!1,comment:""};e.area.push(m)}}catch(e){y=!0,v=e}finally{try{!g&&b.return&&b.return()}finally{if(y)throw v}}var C=JSON.parse(localStorage.getItem(e.storageId));if(C){var x=C.userDefinedData;if(x){var w=x.profession;if(w)for(var B in w)e.baseData.profession.push({id:w[B].id,name:w[B].name});var D=x.has_other_req;if(D)for(var q in D)e.baseData.has_other_req.push({id:D[q].id,name:D[q].name});var $=x.personal_tag;if($)for(var I in $)e.baseData.personal_tag.push({id:$[I].id,name:$[I].name});var U=x.department;if(U)for(var k in U)e.baseData.department.push({id:U[k].id,name:U[k].name})}}}}).catch(function(e){console.error(e)})},setUserDefined:function(e){var t=this,a=!1;if(t.baseData[e.type_name].length){var n=!0,r=!1,o=void 0;try{for(var i,s=c()(t.baseData[e.type_name]);!(n=(i=s.next()).done);n=!0){i.value.id==e.id&&(a=!0)}}catch(e){r=!0,o=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw o}}}a||(t.baseData[e.type_name].push({id:e.id,name:e.name}),t.userDefinedData[e.type_name].push({id:e.id,name:e.name})),t.saveLocalData()},setUserBasicInfoAll:function(e){var t=this;t.userbasicinfo=e;var a=!0,n=!1,r=void 0;try{for(var o,i=c()(t.userBasicInfoArr);!(a=(o=i.next()).done);a=!0){var s=o.value;t.orguserbasicinfo[s]=e[s]}}catch(e){n=!0,r=e}finally{try{!a&&i.return&&i.return()}finally{if(n)throw r}}var l=!0,f=!1,u=void 0;try{for(var d,p=c()(t.userBasicInfoArr);!(l=(d=p.next()).done);l=!0){var _=d.value;t.destuserbasicinfo[_]=e[_]}}catch(e){f=!0,u=e}finally{try{!l&&p.return&&p.return()}finally{if(f)throw u}}},setUserBasicInfo:function(e){var t=this;t.changeTimes++,t.userbasicinfo[e[0]]=e[1],t.destuserbasicinfo[e[0]]=e[1],t.changeFieldLen1=0;for(var a in t.orguserbasicinfo)for(var n in t.destuserbasicinfo)a==n&&t.orguserbasicinfo[a]!=t.destuserbasicinfo[n]&&t.changeFieldLen1++;t.setCouldBeCreated(),t.changeFieldLen1>0?t.saveLocalData():t.changeTimes>12&&localStorage.removeItem(t.storageId)},setCouldBeCreated:function(){var e=this;e.changeFieldLen=e.changeFieldLen1+e.changeFieldLen2+e.changeFieldLen3+e.changeFieldLen4,e.changeFieldLen>=6?e.couldBeCreated=!0:e.couldBeCreated=!1},setReqInfo:function(e){var t=this;t.changeTimesUser++,t.reqinfo[e[0]]=e[1],t.changeFieldLen2=0;for(var a in t.reqinfo)if("object"==i()(t.reqinfo[a]))if("allopatry_conf_info"==a||"consumption_interval"==a)for(var n in t.reqinfo[a])""!=t.reqinfo[a][n].num&&t.changeFieldLen2++,"allopatry_conf_info"==a&&(t.reqinfo[a][n].id>0&&t.changeFieldLen2++,""!=t.reqinfo[a][n].price&&t.changeFieldLen2++);else for(var r in t.reqinfo[a])t.reqinfo[a][r]&&t.changeFieldLen2++;else""!=t.reqinfo[a]&&"reason"!=a&&t.changeFieldLen2++;t.setCouldBeCreated(),t.changeFieldLen2>0&&t.saveLocalData()},setUserFeature:function(e){var t=this;t.userfeature[e[0]]=e[1],t.changeFieldLen3=0;for(var a in t.userfeature)if("object"==i()(t.userfeature[a]))for(var n in t.userfeature[a])t.userfeature[a][n]&&t.changeFieldLen3++;else""!=t.userfeature[a]&&t.changeFieldLen3++;t.setCouldBeCreated(),t.changeFieldLen3>0&&t.changeTimesUser>1&&t.saveLocalData()},setCompanyFeature:function(e){var t=this;t.companyfeature[e[0]]=e[1],t.changeFieldLen4=0;for(var a in t.companyfeature)if("object"==i()(t.companyfeature[a]))for(var n in t.companyfeature[a])t.companyfeature[a][n]&&t.changeFieldLen4++;else""!=t.companyfeature[a]&&t.changeFieldLen4++;t.setCouldBeCreated(),t.changeFieldLen4>0&&t.saveLocalData()},sixLimited:function(){this.$message({message:"您至少需要完善6项客户信息，才能完成创建。",type:"warning",duration:1e3})},createUser:function(){var e=this;e.$root.Bus.$emit("baseFormValidate"),e.$root.Bus.$emit("formOneValidate"),e.$root.Bus.$emit("formTwoValidate"),e.$root.Bus.$emit("formThreeValidate");var t=e.validateForm();if(""!=t)return void e.$message({message:t,type:"warning",duration:1e3});e.userbasicinfo.require_mobile=e.mobile;var a=/^0\d{2,3}-?\d{7,8}$/,n=/^1[34578]\d{9}$/;if(e.companyfeature.decision_user&&!n.test(e.companyfeature.decision_user.phone)&&!a.test(e.companyfeature.decision_user.phone)&&""!=e.companyfeature.decision_user.phone)return e.$message({message:"决策人联系方式必须为手机或固定电话",type:"warning",duration:1e3}),!1;e.isCreating||(e.isCreating=!0,e.$ajax.post(e.$api.getModuleHost("CRM","customer/saveCustomer"),{customer_id:e.customer_id,company_id:e.company_id,mobile:e.mobile,userbasicinfo:r()(e.userbasicinfo),reqinfo:r()(e.reqinfo),userfeature:r()(e.userfeature),companyfeature:r()(e.companyfeature)}).then(function(t){1e3==t.code?(localStorage.removeItem(e.storageId),e.$root.Bus.$emit("addSuc",[e.mobile,e.company_id]),e.$bus.$emit("flashUserList"),e.$router.push({path:"/foreground/index/userview/"+e.mobile+"/"+t.company_id+"/"+t.customer_id})):alert(t.msg),e.isCreating=!1}).catch(function(t){console.error(t),e.isCreating=!1}))},validateForm:function(){var e="",t=this;for(var a in t.userbasicRule){var n=t.userbasicRule[a].name;if(t.userbasicinfo[n]){if(!t.userbasicRule[a].rule.test(t.userbasicinfo[n]))return e=t.userbasicRule[a].desc}}for(var r in t.reqRule){var o=t.reqRule[r].name;if(t.reqinfo[o])if("next_conf_info"==o){if(!t.reqinfo.reason)return e=t.baseData.year+1+"年会议总预算的原因不能为空"}else{var i=t.reqRule[r].rule;if(!i.test(t.reqinfo[o]))return e=t.reqRule[r].desc}}if(t.reqinfo.consumption_interval)for(var s in t.reqinfo.consumption_interval){t.reqinfo.consumption_interval[s].num||(t.reqinfo.consumption_interval[s].num="");var c=t.reqinfo.consumption_interval[s].num,l=t.reqinfo.consumption_interval[s].id;if(""!=c&&(console.log(t.reqinfo.consumption_interval),!/^[0-9]+$/.test(c)))return e=t.consumptionRule["cons_"+l]}if(t.reqinfo.allopatry_conf_info)for(var f in t.reqinfo.allopatry_conf_info){var c=t.reqinfo.allopatry_conf_info[f].num,u=t.reqinfo.allopatry_conf_info[f].price;if(u&&!/^[0-9]+$/.test(u))return e="常跨地区举办的两种会议金额必须正整数";if(c&&!/^[0-9]+$/.test(c))return e="常跨地区举办的两种会议次数必须正整数"}for(var d in t.userfeatureRule){var p=t.userfeatureRule[d].name;if("participant"==p||"often_conf_area"==p||"decision"==p){if("often_conf_area"==p)for(var _ in t.often_conf_area)if(t.often_conf_area[_].selected&&!t.often_conf_area[_].comment)return e=t.often_conf_area[_].name+"的原因不能为空";if(2==t.userfeature.decision&&(t.userfeature.decision_reason=0),"decision"==p&&t.userfeature[p]&&2!=t.userfeature.decision&&!t.userfeature.decision_reason)return e="决策原因不能为空";if("participant"==p&&t.userfeature[p]&&""==t.userfeature[p][0].comment&&""!=t.userfeature[p][0].id)return e="客户价格敏感度的原因不能为空"}else if("num"==p||"price"==p){var m=t.userfeatureRule[d].rule;if(t.userfeature.percentage&&""!=t.userfeature.percentage[p]&&!m.test(t.userfeature.percentage[p]))return e=t.userfeatureRule[d].desc}else if(t.userfeature[p]){var g=t.userfeatureRule[d].rule;if(""!=t.userfeature.percentage[p]&&!g.test(t.userfeature.percentage[p]))return e=t.userfeatureRule[d].desc}}return e},saveLocalData:function(){var e=this,t="draft_"+e.mobile+e.company_id,a={};if(a={userbasicinfo:e.userbasicinfo,reqinfo:e.reqinfo,userfeature:e.userfeature,companyfeature:e.companyfeature,userDefinedData:e.userDefinedData},a.reqinfo.consumption_interval)for(var n=0;n<a.reqinfo.consumption_interval.length;n++)a.reqinfo.consumption_interval[n].num||(a.reqinfo.consumption_interval[n].num="");localStorage.setItem(t,r()(a))},testData:function(){var e=this;e.customer_id,e.company_id,e.userbasicinfo,e.reqinfo,e.userfeature,e.companyfeature}},computed:{},components:{baseInfoEdit:f.a,requirementEditPart1:d.a,requirementEditPart2:_.a,requirementEditPart3:g.a}}},326:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".padding-bottom50{padding-bottom:50px}.margin-bottom10{margin-bottom:10px}.hr{margin-top:10px;margin-bottom:20px;height:0;border-bottom:1px solid #dcdcdc}h2{margin:10px 0}.header-btn{position:absolute;right:30px;top:4px}.el-input__inner{height:28px;line-height:28px}.el-input{width:80%}.el-input .el-icon-loading{display:none}.el-textarea{width:80%}.el-textarea textarea{resize:none}.media-input .el-input{margin-right:5px;width:100px}.text-align-left .el-form-item__label{text-align:left}.el-checkbox__label,.el-radio__label{margin-left:0;padding-left:0}.el-checkbox+.el-checkbox,.el-radio+.el-radio{margin-left:0}.el-checkbox,.el-radio{margin-left:0;margin-right:10px}.add-data{color:#20a0ff}.add-data span{cursor:pointer}.createTip{font-size:12px;font-weight:400;color:#ff4949}.count-down-wrap{position:absolute;left:200px;top:15px;font-size:14px;color:#ff4949}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/Info/createUser.page.vue"],names:[],mappings:"AACA,kBACE,mBAAqB,CACtB,AACD,iBACE,kBAAoB,CACrB,AACD,IACE,gBAAiB,AACjB,mBAAoB,AACpB,SAAU,AACV,+BAAiC,CAClC,AACD,GACE,aAAe,CAChB,AACD,YACE,kBAAmB,AACnB,WAAY,AACZ,OAAS,CACV,AACD,iBACE,YAAa,AACb,gBAAkB,CACnB,AACD,UACE,SAAW,CACZ,AACD,2BACE,YAAc,CACf,AACD,aACE,SAAW,CACZ,AACD,sBACE,WAAa,CACd,AACD,uBACE,iBAAkB,AAClB,WAAa,CACd,AACD,sCACE,eAAiB,CAClB,AACD,qCAEE,cAAe,AACf,cAAgB,CACjB,AACD,8CAEE,aAAe,CAChB,AACD,uBAEE,cAAe,AACf,iBAAmB,CACpB,AACD,UACE,aAAe,CAChB,AACD,eACE,cAAgB,CACjB,AACD,WACE,eAAgB,AAChB,gBAAoB,AACpB,aAAe,CAChB,AACD,iBACE,kBAAmB,AACnB,WAAY,AACZ,SAAU,AACV,eAAgB,AAChB,aAAe,CAChB",file:"createUser.page.vue",sourcesContent:["\n.padding-bottom50 {\n  padding-bottom: 50px;\n}\n.margin-bottom10 {\n  margin-bottom: 10px;\n}\n.hr {\n  margin-top: 10px;\n  margin-bottom: 20px;\n  height: 0;\n  border-bottom: 1px solid #dcdcdc;\n}\nh2 {\n  margin: 10px 0;\n}\n.header-btn {\n  position: absolute;\n  right: 30px;\n  top: 4px;\n}\n.el-input__inner {\n  height: 28px;\n  line-height: 28px;\n}\n.el-input {\n  width: 80%;\n}\n.el-input .el-icon-loading {\n  display: none;\n}\n.el-textarea {\n  width: 80%;\n}\n.el-textarea textarea {\n  resize: none;\n}\n.media-input .el-input {\n  margin-right: 5px;\n  width: 100px;\n}\n.text-align-left .el-form-item__label {\n  text-align: left;\n}\n.el-checkbox__label,\n.el-radio__label {\n  margin-left: 0;\n  padding-left: 0;\n}\n.el-checkbox + .el-checkbox,\n.el-radio + .el-radio {\n  margin-left: 0;\n}\n.el-checkbox,\n.el-radio {\n  margin-left: 0;\n  margin-right: 10px;\n}\n.add-data {\n  color: #20a0ff;\n}\n.add-data span {\n  cursor: pointer;\n}\n.createTip {\n  font-size: 12px;\n  font-weight: normal;\n  color: #FF4949;\n}\n.count-down-wrap {\n  position: absolute;\n  left: 200px;\n  top: 15px;\n  font-size: 14px;\n  color: #FF4949;\n}\n"],sourceRoot:""}])},350:function(e,t,a){var n=a(326);"string"==typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);a(218)("18669beb",n,!0)},380:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"padding-bottom50"},[e.creating?a("div",[a("p",[e._v("\n\t\t\t\t"+e._s(e.countDownDesc)+"\n\t\t\t")])]):a("div",[a("div",{staticClass:"count-down-wrap"},[e._v(e._s(e.countDownDesc))]),e._v(" "),a("h2",[e._v("办会人基本信息\n        "),1==e.status&&e.couldBeCreated?a("el-button",{staticClass:"header-btn",attrs:{type:"primary",disabled:e.isCreating},on:{click:function(t){e.createUser()}}},[e._v("\n          创建\n        ")]):e._e(),e._v(" "),1!=e.status||e.couldBeCreated?e._e():a("div",{staticClass:"header-btn"},[a("span",{staticClass:"createTip"},[e._v("您至少需要完善6项客户信息，才能完成创建")]),e._v(" "),a("el-button",{attrs:{type:"default",disabled:""},on:{click:function(t){e.sixLimited()}}},[e._v("\n            创建\n          ")])],1)],1),e._v(" "),a("baseInfoEdit",{attrs:{status:e.status,customer_id:e.customer_id,company_id:e.company_id,mobile:e.mobile,baseData:e.baseData},on:{getUserBasicInfo:e.setUserBasicInfo,getUserBasicInfoAll:e.setUserBasicInfoAll,getUserDefined:e.setUserDefined}}),e._v(" "),a("div",{staticClass:"hr"}),e._v(" "),a("h2",[e._v("会议需求分析")]),e._v(" "),a("requirementEditPart1",{ref:"part1",attrs:{status:e.status,customer_id:e.customer_id,company_id:e.company_id,mobile:e.mobile,baseData:e.baseData,reqRule:e.reqRule,city:e.city},on:{getReqInfo:e.setReqInfo}}),e._v(" "),a("div",{staticClass:"hr"}),e._v(" "),a("h2",[e._v("客户采购分析")]),e._v(" "),a("requirementEditPart2",{attrs:{status:e.status,customer_id:e.customer_id,company_id:e.company_id,mobile:e.mobile,baseData:e.baseData,area:e.area},on:{getUserFeature:e.setUserFeature,getUserDefined:e.setUserDefined}}),e._v(" "),a("div",{staticClass:"hr"}),e._v(" "),a("h2",[e._v("企业采购分析")]),e._v(" "),a("requirementEditPart3",{attrs:{status:e.status,customer_id:e.customer_id,company_id:e.company_id,mobile:e.mobile,baseData:e.baseData},on:{getCompanyFeature:e.setCompanyFeature,getUserDefined:e.setUserDefined}}),e._v(" "),1==e.status&&e.couldBeCreated?a("el-button",{attrs:{type:"primary",disabled:e.isCreating},on:{click:function(t){e.createUser()}}},[e._v("\n\t\t\t\t创建\n\t\t\t")]):e._e(),e._v(" "),1!=e.status||e.couldBeCreated?e._e():a("el-button",{attrs:{type:"default",disabled:""},on:{click:function(t){e.sixLimited()}}},[e._v("\n\t\t\t\t创建\n\t\t\t")])],1)])},staticRenderFns:[]}}});
//# sourceMappingURL=1.86a358c91762131d04c1.js.map