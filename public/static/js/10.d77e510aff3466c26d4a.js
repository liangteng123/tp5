webpackJsonp([10],{226:function(e,t,a){function l(e){a(348)}var r=a(132)(a(295),a(378),l,null,null);e.exports=r.exports},295:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={data:function(){return{loading:!0,activeCustomer:"all",customerParam:{page:1,type:0},pageParam:{},filterData:{deal_times:[],total_price:[],deal_time:[],perfection_degree:[]},value1:"",value2:"",value3:"",value4:"",customerData:[]}},mounted:function(){var e=this;e.loading=!0,e.getCustomerList(),e.getFilterData()},methods:{handleClick:function(e,t){var a=this,l=e.name,r={all:0,created:1,notCreated:2};a.resetFilterVal(),a.customerParam.type=r[l],a.customerParam.page=1,a.loading=!0,a.getCustomerList()},resetFilterVal:function(){var e=this;e.value1="",e.value2="",e.value3="",e.value4=""},handleCurrentChange:function(e){this.loading=!0,this.getCustomerList()},getCustomerList:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","/manage/getCustomerList"),e.customerParam).then(function(t){1e3==t.code&&(e.customerData=t.data,e.pageParam.total=t.total,e.loading=!1)})},getFilterData:function(){var e=this;e.$ajax.get(e.$api.getModuleHost("CRM","/manage/getFilterField")).then(function(t){if(1e3==t.code){var t=t.data;for(var a in t.deal_times)e.filterData.deal_times.push({value:a,label:t.deal_times[a]});for(var l in t.total_price)e.filterData.total_price.push({value:l,label:t.total_price[l]});for(var r in t.deal_time)e.filterData.deal_time.push({value:r,label:t.deal_time[r]});for(var o in t.perfection_degree)e.filterData.perfection_degree.push({value:o,label:t.perfection_degree[o]})}})},sortChange:function(e){var t=this,a=a="ascending"==e.order?0:1;t.customerParam.sort=e.prop,t.customerParam.order=a,t.loading=!0,t.getCustomerList()},filterList:function(e,t){var a=this;a.customerParam[t]=e,a.loading=!0,a.getCustomerList()}},components:{}}},324:function(e,t,a){t=e.exports=a(217)(!0),t.push([e.i,".container{min-width:1366px;overflow-x:auto}.city-select-txt{font-size:14px;margin:10px 0}.table-title{cursor:pointer}","",{version:3,sources:["D:/wamp/www/boss_crm/src/components/mngview/CustomerData.vue"],names:[],mappings:"AACA,WACE,iBAAkB,AAClB,eAAiB,CAClB,AACD,iBACE,eAAgB,AAChB,aAAe,CAChB,AACD,aACE,cAAgB,CACjB",file:"CustomerData.vue",sourcesContent:["\n.container {\n  min-width: 1366px;\n  overflow-x: auto;\n}\n.city-select-txt {\n  font-size: 14px;\n  margin: 10px 0;\n}\n.table-title {\n  cursor: pointer;\n}\n"],sourceRoot:""}])},348:function(e,t,a){var l=a(324);"string"==typeof l&&(l=[[e.i,l,""]]),l.locals&&(e.exports=l.locals);a(218)("27eda694",l,!0)},378:function(e,t){e.exports={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{directives:[{name:"loading",rawName:"v-loading.body",value:e.loading,expression:"loading",modifiers:{body:!0}}],staticClass:"container",attrs:{"element-loading-text":"拼命加载中"}},[a("p",{staticClass:"city-select-txt"},[e._v("选择客户类型")]),e._v(" "),a("el-tabs",{attrs:{type:"card"},on:{"tab-click":e.handleClick},model:{value:e.activeCustomer,callback:function(t){e.activeCustomer=t},expression:"activeCustomer"}},[a("el-tab-pane",{attrs:{label:"全部成交客户",name:"all"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"已创建客户",name:"created"}}),e._v(" "),a("el-tab-pane",{attrs:{label:"待创建客户",name:"notCreated"}})],1),e._v(" "),a("p",{staticClass:"city-select-txt"},[e._v("条件筛选")]),e._v(" "),a("el-select",{attrs:{placeholder:"按总成交次数筛选"},on:{change:function(t){e.filterList(t,"deal_times")}},model:{value:e.value1,callback:function(t){e.value1=t},expression:"value1"}},[a("el-option",{key:"0",attrs:{label:"按总成交次数筛选",value:"0"}}),e._v(" "),e._l(e.filterData.deal_times,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),a("el-select",{attrs:{placeholder:"按总成交金额筛选"},on:{change:function(t){e.filterList(t,"total_price")}},model:{value:e.value2,callback:function(t){e.value2=t},expression:"value2"}},[a("el-option",{key:"0",attrs:{label:"按总成交金额筛选",value:"0"}}),e._v(" "),e._l(e.filterData.total_price,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),a("el-select",{attrs:{placeholder:"按最近成交时间筛选"},on:{change:function(t){e.filterList(t,"deal_time")}},model:{value:e.value3,callback:function(t){e.value3=t},expression:"value3"}},[a("el-option",{key:"0",attrs:{label:"按最近成交时间筛选",value:"0"}}),e._v(" "),e._l(e.filterData.deal_time,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),a("el-select",{attrs:{placeholder:"按客户信息完善度筛选"},on:{change:function(t){e.filterList(t,"perfection_degree")}},model:{value:e.value4,callback:function(t){e.value4=t},expression:"value4"}},[a("el-option",{key:"0",attrs:{label:"按客户信息完善度筛选",value:"0"}}),e._v(" "),e._l(e.filterData.perfection_degree,function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})],2),e._v(" "),a("el-table",{staticStyle:{"margin-top":"20px"},attrs:{data:e.customerData,border:""},on:{"sort-change":e.sortChange}},[a("el-table-column",{attrs:{prop:"id",label:"客户ID"}}),e._v(" "),a("el-table-column",{attrs:{prop:"name",label:"客户姓名"},scopedSlots:e._u([{key:"default",fn:function(t){return[t.row.is_create?a("a",{staticStyle:{color:"#409EFF"},attrs:{target:"_blank",href:"/foreground/index/userview?from=bossAdd&checkType=2&mobile="+t.row.mobile+"&companyId="+t.row.company_id}},[e._v("\n\t\t\t\t\t "+e._s(t.row.name)+"\n\t\t\t\t")]):a("div",[e._v(e._s(t.row.name))])]}}])}),e._v(" "),a("el-table-column",{attrs:{prop:"company",label:"所在公司",width:"300"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deal_times",label:"总成交次数",width:"130",sortable:"custom","label-class-name":"table-title"}}),e._v(" "),a("el-table-column",{attrs:{prop:"total_price",label:"总成交金额",width:"130","label-class-name":"table-title",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deal_time",label:"最近成交时间",width:"200","label-class-name":"table-title",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"deal_price",label:"最近成交金额",width:"150","label-class-name":"table-title",sortable:"custom"}}),e._v(" "),a("el-table-column",{attrs:{prop:"perfection_degree",label:"客户信息完善比例",width:"180","label-class-name":"table-title",sortable:"custom"}}),e._v(" "),"created"==e.activeCustomer||"notCreated"==e.activeCustomer?a("el-table-column",{attrs:{prop:"deal_admins",label:"可查看专员（多人）",width:"180"}}):e._e(),e._v(" "),"created"==e.activeCustomer?a("el-table-column",{attrs:{prop:"perfection_degree_admin",label:"信息完善贡献率最高专员",width:"200"}}):e._e(),e._v(" "),"created"==e.activeCustomer?a("el-table-column",{attrs:{prop:"contribution_rate",label:"贡献率占比"}}):e._e()],1),e._v(" "),a("el-pagination",{staticStyle:{"margin-top":"20px"},attrs:{"page-size":10,"current-page":e.customerParam.page,layout:"total, prev, pager, next",total:e.pageParam.total},on:{"current-change":e.handleCurrentChange,"update:currentPage":function(t){e.$set(e.customerParam,"page",t)}}})],1)},staticRenderFns:[]}}});
//# sourceMappingURL=10.d77e510aff3466c26d4a.js.map